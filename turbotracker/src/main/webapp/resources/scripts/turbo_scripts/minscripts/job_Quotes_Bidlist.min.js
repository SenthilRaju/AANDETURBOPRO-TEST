function loadBidListGrid(){$("#quotesBidlist").jqGrid({datatype:"JSON",mtype:"POST",url:"./jobtabs2/jobquotesbidlist",colNames:"BidderId;Bidder;Low;Contact;Type;TypeId;Last Quote;Rev.;JobNumber;RxMasterId;joMasterId;rxContactId;Rep.;Email".split(";"),colModel:[{name:"bidderId",index:"bidderId",align:"",width:40,editable:!0,hidden:!0,edittype:"text",editoptions:{size:30},editrules:{required:!1}},{name:"bidder",index:"bidder",align:"",width:120,editable:!0,edittype:"text",editoptions:{size:30},editrules:{required:!0}},
{name:"low",index:"low",align:"center",width:30,editable:!0,formatter:"checkbox",edittype:"checkbox"},{name:"contact",index:"contact",align:"",width:80,editable:!0,edittype:"text",editoptions:{size:1},editrules:{required:!1}},{name:"quoteType",index:"quoteType",align:"center",width:40,editable:!0,editoptions:{size:30,readonly:!1},editrules:{required:!0}},{name:"quoteTypeID",index:"quoteTypeID",width:30,hidden:!0,editable:!0,editoptions:{size:30,readonly:!1}},{name:"lastQuote",index:"lastQuote",align:"center",
width:65,editable:!0,editoptions:{size:10,readonly:!1,dataInit:function(a){$(a).datepicker({dateFormat:"mm/dd/yy hh:mm a"})}},editrules:{required:!1},formatter:mailImage},{name:"rev",index:"rev",align:"center",width:30,editable:!0,editoptions:{size:6,readonly:!1},editrules:{required:!1}},{name:"jobNumber",index:"jobNumber",width:30,hidden:!0,editable:!0,edittype:"text",editrules:{required:!1}},{name:"rxMasterId",index:"rxMasterId",width:30,hidden:!0,editable:!0,edittype:"text",editrules:{required:!1}},
{name:"joMasterId",index:"joMasterId",width:40,hidden:!0,editable:!0,edittype:"text",editrules:{required:!1}},{name:"rxContactId",index:"rxContactId",width:40,hidden:!0,editable:!0,edittype:"text",editrules:{required:!1}},{name:"rep",index:"rep",align:"center",width:30,hidden:!1,editable:!0,edittype:"text",editrules:{edithidden:!0,required:!1}},{name:"email",index:"email",align:"center",width:40,hidden:!0,editable:!0,edittype:"text",editrules:{edithidden:!0,required:!1}}],rowNum:0,pgbuttons:!1,recordtext:"",
rowList:[],pgtext:null,viewrecords:!1,sortname:"employeeId",sortorder:"asc",imgpath:"themes/basic/images",caption:!1,height:200,width:1080,rownumbers:!0,altRows:!0,altclass:"myAltRowClass",postData:{jobNumber:function(){return $("#jobNumber_ID").text()}},jsonReader:{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata"},onSelectRow:function(a){a=jQuery("#quotesBidlist").jqGrid("getRowData",a);$("#selectBidderId").val(a.bidderId)},ondblClickRow:function(a){var b=
jQuery(this).getRowData(a);a=b.rxMasterId;b=b.bidder.replace("&","and").replace("&","and");document.location.href="./customerdetails?rolodexNumber="+a+"&name=("+b+")"},loadComplete:function(a){},loadError:function(a,b,c){}}).navGrid("",{add:!0,edit:!0,del:!0,refresh:!0,search:!1,alertcap:"Warning",alerttext:"Please select a Bidder"},{closeAfterEdit:!0,reloadAfterSubmit:!0,reloadGridAfterSubmit:!0,closeOnEscape:!0,modal:!0,jqModal:!1,viewPagerButtons:!1,editCaption:"Edit Bidder",width:520,top:10,left:300,
beforeShowForm:function(a){jQuery("#tr_rep",a).hide();jQuery("#tr_low",a).show();$(function(){var a={},c="";$("#bidder").autocomplete({minLength:2,select:function(a,b){var c=b.item.id;$("#rxMasterId").val(c);$.ajax({url:"./jobtabs2/filterBidderList",mType:"GET",data:{rxMasterId:c},success:function(a){var b='<select style="width:180px;margin-left: 3px;" id="contactId" onchange="getContactId()"><option value="-1"></option>';$.each(a,function(a,c){b+="<option value="+c.id+">"+c.value+"</option>"});b+=
"</select>";jQuery("#TblGrid_quotesBidlist #tr_contact .DataTD").empty();jQuery("#TblGrid_quotesBidlist #tr_contact .DataTD").append(b)}});getContactId=function(){$("#rxContactId").val($("#contactId").val())}},source:function(d,f){var e=d.term;e in a?f(a[e]):c=$.getJSON("jobtabs2/bidderList",d,function(d,h,g){a[e]=d;g===c&&f(d)})}})});$(function(){var a={},c="";$("#quoteType").autocomplete({minLength:1,select:function(a,b){var c=b.item.id;$("#quoteTypeId").val(c)},source:function(d,f){var e=d.term;
e in a?f(a[e]):c=$.getJSON("employeeCrud/customerType",d,function(d,h,g){a[e]=d;g===c&&f(d)})}})});a=$("#rxMasterId").val();$.ajax({url:"./jobtabs2/filterBidderList",mType:"GET",data:{rxMasterId:a},success:function(a){var c='<select style="width:180px;margin-left: 3px;" id="contactId" onchange="getContactId()"><option value="-1"></option>';$.each(a,function(a,b){c+="<option value="+b.id+">"+b.value+"</option>"});c+="</select>";jQuery("#TblGrid_quotesBidlist #tr_contact .DataTD").empty();jQuery("#TblGrid_quotesBidlist #tr_contact .DataTD").append(c)}});
getContactId=function(){$("#rxContactId").val($("#contactId").val())};a=$("#rxContactId").val();setTimeout("jQuery('#TblGrid_quotesBidlist #tr_contact .DataTD option[value="+a+"]').attr('selected','selected')",1E3);return!0},onInitializeForm:function(a){$("#contact").empty();jQuery("#TblGrid_quotesBidlist #tr_bidder .DataTD").append('<img alt="search" src="./../resources/scripts/jquery-autocomplete/search.png" title="Must be atleast 2 characters long" style="padding-left: 10px;">');jQuery("#TblGrid_quotesBidlist #tr_quoteType .DataTD").append('<img alt="search" src="./../resources/scripts/jquery-autocomplete/search.png" title="Must be atleast 1 characters long" style="padding-left: 10px;">');
jQuery("#TblGrid_quotesBidlist #tr_bidder .CaptionTD").append('<span style="color:red;"> *</span>');jQuery("#TblGrid_quotesBidlist #tr_quoteType .CaptionTD").append('<span style="color:red;"> *</span>')},onclickSubmit:function(a){var b=jQuery("#quotesBidlist").jqGrid("getGridParam","selrow");a=jQuery("#quotesBidlist").getCell(b,1);var c=jQuery("#quotesBidlist").getCell(b,5),d=jQuery("#quotesBidlist").getCell(b,9),f=jQuery("#quotesBidlist").getCell(b,10),e=jQuery("#quotesBidlist").getCell(b,11),b=
jQuery("#quotesBidlist").getCell(b,12),f=$("#rxMasterId").val(),b=$("#contactId").val();""===b&&(b=-1);quoteTypeId=$("#quoteTypeId").val();return{selectBidderId:a,rxMasterId:f,joMasterId:e,rxContactId:b,jobNumber:d,quoteType:c,quoteTypeId:quoteTypeId}}},{closeAfterAdd:!0,reloadAfterSubmit:!0,reloadGridAfterSubmit:!0,closeOnEscape:!0,jqModal:!1,viewPagerButtons:!1,addCaption:"Add Bidder",width:520,top:10,left:300,beforeShowForm:function(a){jQuery("#tr_rep",a).hide();jQuery("#tr_low",a).hide();jQuery("#tr_lastQuote",
a).hide();jQuery("#tr_rev",a).hide();$(function(){var a={},c="";$("#bidder").autocomplete({minLength:2,select:function(a,b){var c=b.item.id;$("#rxMasterId").val(c);$.ajax({url:"./jobtabs2/filterBidderList",mType:"GET",data:{rxMasterId:c},success:function(a){var b='<select style="width:180px;margin-left: 3px;" id="contactId" onchange="getContactId()"><option value="-1"></option>';$.each(a,function(a,c){b+="<option value="+c.id+">"+c.value+"</option>"});b+="</select>";jQuery("#TblGrid_quotesBidlist #tr_contact .DataTD").empty();
jQuery("#TblGrid_quotesBidlist #tr_contact .DataTD").append(b)}});getContactId=function(){$("#rxContactId").val($("#contactId").val())}},source:function(d,f){var e=d.term;e in a?f(a[e]):c=$.getJSON("jobtabs2/bidderList",d,function(d,h,g){a[e]=d;g===c&&f(d)})}})});$(function(){var a={},c="";$("#quoteType").autocomplete({minLength:1,select:function(a,b){var c=b.item.id;$("#quoteTypeId").val(c)},source:function(d,f){var e=d.term;e in a?f(a[e]):c=$.getJSON("employeeCrud/customerType",d,function(d,h,g){a[e]=
d;g===c&&f(d)})}})});a=$("#rxMasterId").val();$.ajax({url:"./jobtabs2/filterBidderList",mType:"GET",data:{rxMasterId:a},success:function(a){var c='<select disabled="disabled" style="width:180px;margin-left: 3px;" id="contactId" onchange="getContactId()"><option value="-1"></option>';$.each(a,function(a,b){c+="<option value="+b.id+">"+b.value+"</option>"});c+="</select>";jQuery("#TblGrid_quotesBidlist #tr_contact .DataTD").empty();jQuery("#TblGrid_quotesBidlist #tr_contact .DataTD").append(c)}});getContactId=
function(){$("#rxContactId").val($("#contactId").val())};return!0},onInitializeForm:function(a){$("#contact").empty();jQuery("#TblGrid_quotesBidlist #tr_bidder .DataTD").append('<img alt="search" src="./../resources/scripts/jquery-autocomplete/search.png" title="Must be atleast 2 characters long" style="padding-left: 10px;">');jQuery("#TblGrid_quotesBidlist #tr_quoteType .DataTD").append('<img alt="search" src="./../resources/scripts/jquery-autocomplete/search.png" title="Must be atleast 1 characters long" style="padding-left: 10px;">');
jQuery("#TblGrid_quotesBidlist #tr_bidder .CaptionTD").append('<span style="color:red;"> *</span>');jQuery("#TblGrid_quotesBidlist #tr_quoteType .CaptionTD").append('<span style="color:red;"> *</span>')},onclickSubmit:function(a){a=$(".jobHeader_JobNumber").val();var b=$("#rxMasterId").val(),c=$("#rxContactId").val();""===c&&(c=-1);return{jobNumber:a,rxMasterId:b,rxContactId:c}}},{closeOnEscape:!0,reloadAfterSubmit:!0,jqModal:!1,top:10,left:300,caption:"Delete Bidder",msg:"Do you want delete selected Bidder?",
onclickSubmit:function(a){a=jQuery("#quotesBidlist").jqGrid("getGridParam","selrow");return{selectBidderId:jQuery("#quotesBidlist").getCell(a,1)}}},{});return!0}function mailImage(a,b,c){return""!==a&&null!==a?"<img src='./../resources/images/message-already-read.png' title='Mail Sent'  style='vertical-align:middle;'>"+a:""}
function loadQuotesGrid(){$("#quotes").jqGrid({datatype:"JSON",mtype:"POST",url:"./jobtabs2/jobquoteslist",colNames:"joQuoteHeaderID;quoteTypeID;Type;Rev.;Cost($);Amount($);Discount($);CreatedByID;Created By;CreatedBYFullName;Internal Notes;Remarks;PQ;displayQuantity;printQuantity;displayParagraph;printParagraph;displayManufacturer;printManufacturer;displayCost;printCost;displayPrice;printPrice;displayMult;printMult;displaySpec;printSpec;notesFullWidth;lineNumbers;printTotal;hidePrice".split(";"),colModel:[{name:"joQuoteHeaderID",
index:"joQuoteHeaderID",align:"",hidden:!0,width:60,editoptions:{},editrules:{}},{name:"quoteTypeID",index:"quoteTypeID",align:"",hidden:!0,width:60,editoptions:{},editrules:{}},{name:"quoteType",index:"quoteType",align:"",width:60,editoptions:{},editrules:{}},{name:"rev",index:"rev",align:"center",width:30,editoptions:{},editrules:{}},{name:"costAmount",index:"costAmount",align:"center",width:60,formatter:customCurrencyFormatter,editoptions:{},editrules:{}},{name:"quoteAmount",index:"quoteAmount",
align:"center",width:60,formatter:customCurrencyFormatter,editoptions:{},editrules:{}},{name:"discountAmount",index:"discountAmount",align:"center",width:60,formatter:customCurrencyFormatter,editoptions:{},editrules:{}},{name:"createdByID",index:"createdByID",align:"center",hidden:!0,width:40,editoptions:{},editrules:{}},{name:"createdByName",index:"createdByName",align:"center",width:90,editoptions:{},editrules:{}},{name:"createdBYFullName",index:"createdBYFullName",align:"center",hidden:!0,width:90,
editoptions:{},editrules:{}},{name:"internalNote",index:"internalNote",align:"center",width:90,editoptions:{},editrules:{}},{name:"quoteRemarks",index:"quoteRemarks",align:"center",width:90,hidden:!0,editoptions:{},editrules:{}},{name:"primaryQuote",index:"primaryQuote",align:"center",width:40,formatter:"checkbox",edittype:"checkbox",editoptions:{},editrules:{}},{name:"displayQuantity",index:"displayQuantity",align:"center",width:90,hidden:!0,editoptions:{},editrules:{}},{name:"printQuantity",index:"printQuantity",
align:"center",width:90,hidden:!0,editoptions:{},editrules:{}},{name:"displayParagraph",index:"displayParagraph",align:"center",width:90,hidden:!0,editoptions:{},editrules:{}},{name:"printParagraph",index:"printParagraph",align:"center",width:90,hidden:!0,editoptions:{},editrules:{}},{name:"displayManufacturer",index:"displayManufacturer",align:"center",width:90,hidden:!0,editoptions:{},editrules:{}},{name:"printManufacturer",index:"printManufacturer",align:"center",width:90,hidden:!0,editoptions:{},
editrules:{}},{name:"displayCost",index:"displayCost",align:"center",width:90,hidden:!0,editoptions:{},editrules:{}},{name:"printCost",index:"printCost",align:"center",width:90,hidden:!0,editoptions:{},editrules:{}},{name:"displayPrice",index:"displayPrice",align:"center",width:90,hidden:!0,editoptions:{},editrules:{}},{name:"printPrice",index:"printPrice",align:"center",width:90,hidden:!0,editoptions:{},editrules:{}},{name:"displayMult",index:"displayMult",align:"center",width:90,hidden:!0,editoptions:{},
editrules:{}},{name:"printMult",index:"printMult",align:"center",width:90,hidden:!0,editoptions:{},editrules:{}},{name:"displaySpec",index:"displaySpec",align:"center",width:90,hidden:!0,editoptions:{},editrules:{}},{name:"printSpec",index:"printSpec",align:"center",width:90,hidden:!0,editoptions:{},editrules:{}},{name:"notesFullWidth",index:"notesFullWidth",align:"center",width:90,hidden:!0,editoptions:{},editrules:{}},{name:"lineNumbers",index:"lineNumbers",align:"center",width:90,hidden:!0,editoptions:{},
editrules:{}},{name:"printTotal",index:"printTotal",align:"center",width:90,hidden:!0,editoptions:{},editrules:{}},{name:"hidePrice",index:"hidePrice",align:"center",width:90,hidden:!0,editoptions:{},editrules:{}}],rowNum:0,pgbuttons:!1,recordtext:"",rowList:[],pgtext:null,viewrecords:!1,sortname:"employeeId",sortorder:"asc",imgpath:"themes/basic/images",caption:!1,height:86,width:1080,rownumbers:!0,altRows:!0,altclass:"myAltRowClass",postData:{jobNumber:function(){return $("#jobNumber_ID").text()}},
loadComplete:function(a){a=$("#jobStatusList").val();if("0"===a&&0!==jQuery("#quotes").getGridParam("records")){$("#jobStatusList option[value='1']").attr("selected","selected");a=1;var b=$(".jobHeader_JobNumber").val();$.ajax({url:"./job_controller/updateJobStatus",mType:"GET",data:{jobStatus:a,jobNumber:b},success:function(a){$("#jobStatusList option[value='1']").attr("selected","selected")}})}},ondblClickRow:function(a){onDoubleClickEditQuoteDetails(a)},loadError:function(a,b,c){},onSelectRow:function(a){a=
$("#quotes");var b=a.jqGrid("getGridParam","selrow");a=a.jqGrid("getCell",b,"joQuoteHeaderID");jQuery("#joQuoteheader").empty();jQuery("#joQuoteheader").text(a)},jsonReader:{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata"}});return!0}
function loadQuoteTemplates(){$("#quoteTemplates").jqGrid({datatype:"JSON",mtype:"POST",url:"./jobtabs2/loadQuoteTemplates",colNames:["joQuoteTemplateHeaderId","Template Name","ownerId","options"],colModel:[{name:"joQuoteTemplateHeaderId",index:"joQuoteTemplateHeaderId",align:"",width:40,editable:!0,hidden:!0},{name:"templateName",index:"templateName",align:"",width:120,editable:!0,edittype:"text"},{name:"ownerId",index:"ownerId",align:"center",width:30,hidden:!0,editable:!0},{name:"options",index:"options",
align:"center",width:40,editable:!0,formatter:editOptionsFormatter}],rowNum:0,pgbuttons:!1,recordtext:"",rowList:[],pgtext:null,viewrecords:!1,sortname:"templateName",sortorder:"asc",imgpath:"themes/basic/images",caption:"Quote Templates",height:170,width:500,rownumbers:!0,altRows:!0,altclass:"myAltRowClass",postData:"",hiddengrid:!0,jsonReader:{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata"},onSelectRow:function(a){},ondblClickRow:function(a){jQuery(this).getRowData(a)},
loadComplete:function(a){},loadError:function(a,b,c){}})}function editOptionsFormatter(a,b,c){return"<img src='./../resources/Icons/plus_new.png' title='Inline Item'  style='padding:1px 4px;'><img src='./../resources/Icons/edit_new.png' title='Inline Item'  style='padding:1px 4px;'><img src='./../resources/Icons/delete_new.png' title='Inline Item'  style='padding:1px 4px;'>"};