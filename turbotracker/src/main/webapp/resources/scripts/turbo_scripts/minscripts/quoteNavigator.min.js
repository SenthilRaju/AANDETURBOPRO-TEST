var aAddandEdit,aDetailId,aListDetailId="",cost=$("#cost").val().replace(/[^0-9\.]+/g,""),price=$("#price").val().replace(/[^0-9\.]+/g,"");$("#cost").val(cost);$("#price").val(price);
$(function(){var a={},b="";$("#product").autocomplete({minLength:2,select:function(a,b){var d=b.item.id,f=b.item.manufactureID;$("#quoteDetailID").val(d);$.ajax({url:"./jobtabs2/quoteDetails",mType:"GET",data:{quoteDetailID:d,rxMasterID:f},success:function(a){$.each(a,function(a,b){manufacture=b.inlineNote;var c=b.paragraph,e=b.itemQuantity,d=b.rxManufacturerID,f=b.detailSequenceId;$("#paragraph").val(c);$("#manufacturer").val(e);$("#rxManufacturerID").val(d);$("#veFactoryId").val(f)})}})},source:function(c,
e){var d=c.term;d in a?e(a[d]):b=$.getJSON("jobtabs2/productList",c,function(c,h,g){a[d]=c;g===b&&e(c)})},error:function(){$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")}})});
$(function(){var a={},b="";$("#manufacturer").autocomplete({minLength:1,select:function(b,a){var d=a.item.id,f=a.item.value;$("#rxManufacturerID").val(d);$.ajax({url:"./jobtabs2/getFactoryID",type:"GET",data:{rxMasterID:d,descripition:f},success:function(a){$("#veFactoryId").val(a)}})},source:function(c,e){var d=c.term;d in a?e(a[d]):b=$.getJSON("jobtabs2/vendorsList",c,function(c,h,g){a[d]=c;g===b&&e(c)})},error:function(){$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")}})});
function deleteQuoteFrom(){var a=$("#addquotesList"),b=jQuery(document.createElement("div"));if(null!==a.jqGrid("getGridParam","selrow"))jQuery(b).html('<span><b style="color: red;">Delete the Line Item?</b></span>'),jQuery(b).dialog({modal:!0,width:300,height:120,title:"Confirm Delete",buttons:{Submit:function(){var a=$("#addquotesList").jqGrid("getGridParam","selrow"),a=$("#addquotesList").jqGrid("getCell",a,"joQuoteDetailID");$.ajax({url:"./jobtabs2/deleteQuickQuoteDetail",mType:"GET",data:{joHeaderQuoteDetailID:a},
success:function(a){$("#addquotesList").trigger("reloadGrid");$.each(a,function(){})}});jQuery(this).dialog("close");$("#addquotesList").trigger("reloadGrid")},Cancel:function(){jQuery(this).dialog("close")}}}).dialog("open");else return jQuery(b).attr("id","msgDlg"),jQuery(b).html('<span><b style="color:red;">Please select a line item to delete</b></span>'),jQuery(b).dialog({modal:!0,width:300,height:150,title:"Warning",buttons:[{height:35,text:"OK",click:function(){$(this).dialog("close")}}]}).dialog("open"),
!1;return!0}jQuery(function(){jQuery("#addButtonDiv").dialog({autoOpen:!1,height:450,width:600,title:"Add/Edit Line Item",modal:!0,buttons:{},close:function(){$("#addButtonForm").validationEngine("hideAll");return!0}})});
function pricePercentageCost(){var a=$("#percentage").val(),b=$("#cost").val().replace(/[^0-9\.]+/g,"");if("0"===a)return priceEmpty=b,$("#price").val(priceEmpty),!1;if(100<=a)return $("#maginAlert").fadeOut("slow"),$("#maginAlert").fadeIn("slow",function(){$("#maginAlert").fadeOut(7E3)}),!1;""!==a&&(price=b/[(100-a)/100],$("#price").val(""),$("#price").val(Math.round(price)));return!0}
function costPercentage(){var a=$("#percentage").val(),b=$("#cost").val().replace(/[^0-9\.]+/g,""),c=$("#price").val().replace(/[^0-9\.]+/g,"");if(""!==c&&"0"!==c&&""!==b&&"0"!==b&&""!==percentage&&"0"!==percentage)return percent=100*[1-b/c],$("#percentage").val(""),$("#percentage").val(a),!0}
function openLineItemDialog(){var a=$("#addquotesList").jqGrid("getGridParam","selrow"),a=$("#addquotesList").jqGrid("getCell",a,"inlineNote");$("#lineItem").val("");$("#lineItem").val(a);!1===a&&(a="");var b=jQuery(document.createElement("div"));jQuery(b).html('<table><tr><td><textarea id="lineItem" rows="24" cols="54">'+a+"</textarea></td></tr></table>");jQuery(b).dialog({modal:!0,width:500,height:500,title:"InLine Note",buttons:{Submit:function(){var a=$("#lineItem").val();LineItemInfo(a);jQuery(this).dialog("close");
$("#addquotesList").trigger("reloadGrid")},Cancel:function(){jQuery(this).dialog("close")}}}).dialog("open")}
function openFooterLineDialog(){var a=$("#addquotesList").jqGrid("getGridParam","selrow"),a=$("#addquotesList").jqGrid("getCell",a,"productNote");$("#footerLine").val("");$("#footerLine").val(a);!1===a&&(a="");var b=jQuery(document.createElement("div"));jQuery(b).html('<table><tr><td><textarea id="footerLine" rows="5" cols="58">'+a+"</textarea></td></tr></table>");jQuery(b).dialog({modal:!0,height:210,width:535,title:"Footnote",buttons:{Submit:function(){var a=$("#footerLine").val();footerNoteInfo(a);
jQuery(this).dialog("close");$("#addquotesList").trigger("reloadGrid")},Cancel:function(){jQuery(this).dialog("close")}}}).dialog("open")}
function saveQuoteNavigator(){var a=jQuery(document.createElement("div"));if("add"===aAddandEdit){if(!$("#addButtonForm").validationEngine("validate"))return!1;if(""===$("#rxManufacturerID").val())return jQuery(a).html('<span><b style="color:red;">This Vendor is not available. Please choose another Vendor (or) Add the Vendor Using Add Manufacture.</b></span>'),jQuery(a).dialog({modal:!0,width:320,height:160,title:"Warning",buttons:[{height:35,text:"OK",click:function(){$(this).dialog("close")}}]}).dialog("open"),
!1;addQuoteFormDialog();jQuery("#addButtonDiv").dialog("close");return!0}if("edit"===aAddandEdit){if(!$("#addButtonForm").validationEngine("validate"))return!1;addQuoteFormDialog();jQuery("#addButtonDiv").dialog("close");return!0}}function cancelQuoteNavigator(){$("#addButtonForm").validationEngine("hideAll");jQuery("#addButtonDiv").dialog("close");return!0}
function addQuoteFormDialog(){var a=jQuery(document.createElement("div"));if(""===$("#quoteTypeDetail").val()||""===$("#jobQuoteSubmittedBYFullName").val())return jQuery(a).html('<span><b style="color:red;">Please provide "Type" and "Submitted By"</b></span>'),jQuery(a).dialog({modal:!0,width:300,height:150,title:"Warning",buttons:[{height:35,text:"OK",click:function(){$(this).dialog("close")}}]}).dialog("open"),!1;var a=$("#addButtonForm").serialize(),b=jQuery("#joQuoteheader").text();"edit"===aAddandEdit&&
(a=$("#addButtonForm").serialize());b="copy"===aGlobalVariable?$("#joHeaderID").val():saveQuoteDetailInfo(!0);$("#joQuoteHeaderID").val(" ");$("#joQuoteHeaderID").val(b);$("#addquotesList").trigger("reloadGrid");$("#addquotesList").jqGrid("setGridParam",{postData:{joQuoteHeaderID:b}});jQuery("#joQuoteheader").empty();jQuery("#joQuoteheader").text(b);var c=b;$("#joHeaderID").val(" ");$("#joHeaderID").val(c);var e="";0===Number(b)&&(e=$("#joHeaderID").val(),$("#addquotesList").trigger("reloadGrid"),
$("#addquotesList").jqGrid("setGridParam",{postData:{joQuoteHeaderID:e}}),jQuery("#joQuoteheader").text(e),c=e,$("#joHeaderID").val(c));b>c&&(c=b);$.ajax({url:"./jobtabs2/manpulaterProductQuotes",type:"POST",data:a+"&joQuoteHeaderID="+c+"&quoteheaderid="+b+"&oper="+aAddandEdit,success:function(a){$("#joQuoteheader").text(b);$("#addquotesList").jqGrid("GridUnload");loadQuotesListDetails();$("#addquotesList").jqGrid("setGridParam",{postData:{joQuoteHeaderID:b}});$("#addquotesList").trigger("reloadGrid");
"edit"===aGlobalConstant?(aDetailId=a+",",aListDetailId+=aDetailId,$("#joDetailID").val(aListDetailId)):$("#joDetailID").val("");0===Number(b)&&($("#addquotesList").jqGrid("GridUnload"),loadQuotesListDetails(),$("#addquotesList").jqGrid("setGridParam",{postData:{joQuoteHeaderID:e}}),$("#addquotesList").trigger("reloadGrid"))}});return!0}
function deleteQuote(a){$.ajax({url:"./jobtabs2/deleteQuickQuoteDetail",mType:"GET",data:{joHeaderQuoteDetailID:a},success:function(a){$("#addquotesList").trigger("reloadGrid");$.each(a,function(){})}})};