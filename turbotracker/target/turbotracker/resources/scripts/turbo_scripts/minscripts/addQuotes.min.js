var lastSel,area;$("input[type=text]").on("keyup",function(a){if(13==a.which)return!1});
function loadQuotesListDetails(){var a=$("#joQuoteheader").text();$("#addquotesList").jqGrid({datatype:"JSON",url:"./jobtabs2/getQuoteListDetails",mtype:"GET",postData:{joQuoteHeaderID:a},pager:jQuery("#addquotespager"),colNames:";Description;Qty.;Paragraph;Vendors;Spec;Cost;Multi;Sell Price;QuoteDetailID;ManufacturerID;QuoteHeaderID;FactoryID;LineItem;FootLine;Posiion;Move;Percentage;Options".split(";"),colModel:[{name:"inLineNoteImage",index:"inLineNoteImage",align:"right",width:10,editable:!1,
hidden:!1,formatter:inlineImage},{name:"product",index:"product",align:"left",width:90,editable:!0,hidden:!1,edittype:"text",editoptions:{dataInit:function(a){$(a).autocomplete({source:"jobtabs2/productList",minLength:3,select:function(a,c){$.ajax({url:"./jobtabs2/quoteDetails",mType:"GET",data:{quoteDetailID:c.item.id,rxMasterID:c.item.manufactureID},success:function(a){$.each(a,function(a,c){manufacture=c.inlineNote;var f=c.paragraph,e=c.itemQuantity,d=c.rxManufacturerID,b=c.detailSequenceId;$("#new_row_paragraph").val(f);
$("#new_row_manufacturer").val(e);$("#new_row_rxManufacturerID").val(d);$("#new_row_veFactoryId").val(b);$("#paragraph").val(f);$("#manufacturer").val(e);$("#rxManufacturerID").val(d);$("#veFactoryId").val(b)})}})}})}},editrules:{edithidden:!1,required:!0}},{name:"itemQuantity",index:"itemQuantity",align:"center",width:30,editable:!0,hidden:!1,edittype:"text",editoptions:{size:30},editrules:{edithidden:!1,required:!1}},{name:"paragraph",index:"paragraph",align:"left",width:90,editable:!0,hidden:!1,
edittype:"text",editoptions:{size:30},editrules:{edithidden:!1,required:!1}},{name:"manufacturer",index:"manufacturer",align:"left",width:90,editable:!0,hidden:!1,edittype:"text",editoptions:{dataInit:function(a){$(a).autocomplete({source:"jobtabs2/vendorsList",minLength:3,select:function(a,c){var d=c.item.id,b=c.item.value;$("#new_row_rxManufacturerID").val(d);$("#rxManufacturerID").val(d);$.ajax({url:"./jobtabs2/getFactoryID",type:"GET",data:{rxMasterID:d,descripition:b},success:function(a){$("#new_row_veFactoryId").val(a);
$("#veFactoryId").val(a)}})}})}},editrules:{edithidden:!1,required:!0}},{name:"mult",index:"mult",align:"right",width:20,editable:!0,hidden:!0,edittype:"text",editoptions:{size:30},editrules:{edithidden:!1,required:!1}},{name:"cost",index:"cost",align:"right",width:50,editable:!0,hidden:!1,formatter:customCurrencyFormatter,edittype:"text",editoptions:{size:30},editrules:{edithidden:!1,required:!1}},{name:"spec",index:"spec",align:"right",width:20,editable:!0,hidden:!0,edittype:"text",editoptions:{size:30},
editrules:{edithidden:!1,required:!1}},{name:"price",index:"price",align:"right",width:50,editable:!0,hidden:!1,formatter:customCurrencyFormatter,edittype:"text",editoptions:{size:30},editrules:{edithidden:!1,required:!1}},{name:"joQuoteDetailID",index:"joQuoteDetailID",align:"left",width:90,editable:!0,hidden:!0,edittype:"text",editoptions:{size:30},editrules:{edithidden:!1,required:!1}},{name:"rxManufacturerID",index:"rxManufacturerID",align:"left",width:90,editable:!0,hidden:!0,edittype:"text",
editoptions:{size:30},editrules:{edithidden:!1,required:!1}},{name:"joQuoteHeaderID",index:"joQuoteHeaderID",align:"left",width:90,editable:!0,hidden:!0,edittype:"text",editoptions:{size:30},editrules:{edithidden:!1,required:!1}},{name:"veFactoryId",index:"veFactoryId",align:"left",width:90,editable:!0,hidden:!0,edittype:"text",editoptions:{size:30},editrules:{edithidden:!1,required:!1}},{name:"inlineNote",index:"inlineNote",align:"left",width:90,editable:!0,hidden:!0,edittype:"text",editoptions:{size:30},
editrules:{edithidden:!1,required:!1}},{name:"productNote",index:"productNote",align:"left",width:90,editable:!0,hidden:!0,edittype:"text",editoptions:{size:30},editrules:{edithidden:!1,required:!1}},{name:"position",index:"position",align:"left",width:90,editable:!0,hidden:!0,edittype:"text",editoptions:{size:30},editrules:{edithidden:!1,required:!1}},{name:"upAndDown",index:"upAndDown",align:"left",width:30,formatter:upAndDownImage},{name:"percentage",index:"percentage",align:"right",width:50,editable:!0,
hidden:!0,edittype:"text",editoptions:{size:30},editrules:{edithidden:!1,required:!1}},{name:"edit",index:"edit",align:"center",width:40,hidden:!1,editrules:{edithidden:!1},formatter:imgFmatter}],rowNum:1E3,pgbuttons:!1,recordtext:"",rowList:[],pgtext:null,viewrecords:!0,sortname:"Product",sortorder:"asc",imgpath:"themes/basic/images",caption:"Line Items",height:190,width:1100,loadComplete:function(a){$("#addquotesList").setSelection(1,!0);a=jQuery("#addquotesList").getRowData();for(var f=0,b=0,d=
0;d<a.length;d++)var h=a[d],g=h.cost.replace(/[^0-9\.]+/g,""),f=f+Number(g),h=h.price.replace(/[^0-9\.]+/g,""),b=b+Number(h);$("#quoteTotalPrice").val(formatCurrency(b));$("#quoteTotalCost").val(formatCurrency(f));a=$(this).jqGrid("getGridParam","records");f=Number(a)+1;a&&$("#"+f+"_downIcon").css("display","none")},ondblClickRow:function(a){onDoubleClickEditLineItems(a)},gridComplete:function(){$(this).mouseover(function(){var a=$(".ui-state-hover").attr("id");$(this).setSelection(a,!1)})},afterInsertRow:function(a,
b){if("0"===$("#addquotesList").jqGrid("getCell",a,"position")){var e=$("#addquotesList").jqGrid("getCell",a,"joQuoteDetailID");$.ajax({url:"./jobtabs2/updateInlineItemPosition",type:"GET",data:{joQuoteDetailID:e},success:function(a){$("#addquotesList").trigger("reloadGrid")}})}},loadError:function(a,b,e){},jsonReader:{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata"},onSelectRow:function(a){a&&a!==lastSel&&(jQuery("#addquotesList").restoreRow(lastSel),
lastSel=a)},editurl:"./jobtabs2/manpulaterProductQuotes"}).navGrid("#addquotespager",{alertzIndex:3234,search:!1,pager:!1,alertcap:"Warning",alerttext:"Please select a Product"},{closeAfterEdit:!0,reloadAfterSubmit:!0,reloadGridAfterSubmit:!0,closeOnEscape:!0,zIndex:1234,modal:!0,jqModal:!0,viewPagerButtons:!1,editCaption:"Edit Product",width:430,top:235,left:320,beforeShowForm:function(a){jQuery("#TblGrid_addquotesList #tr_product .CaptionTD").empty();jQuery("#TblGrid_addquotesList #tr_product .CaptionTD").append("Description: ");
jQuery("#TblGrid_addquotesList #tr_product .CaptionTD").append('<span style="color:red;"> *</span>');jQuery("#TblGrid_addquotesList #tr_itemQuantity .CaptionTD").empty();jQuery("#TblGrid_addquotesList #tr_itemQuantity .CaptionTD").append("Qty.: ");jQuery("#TblGrid_addquotesList #tr_paragraph .CaptionTD").empty();jQuery("#TblGrid_addquotesList #tr_paragraph .CaptionTD").append("Paragraph: ");jQuery("#TblGrid_addquotesList #tr_manufacturer .CaptionTD").empty();jQuery("#TblGrid_addquotesList #tr_manufacturer .CaptionTD").append("Vendors: ");
jQuery("#TblGrid_addquotesList #tr_manufacturer .CaptionTD").append('<span style="color:red;"> *</span>');jQuery("#TblGrid_addquotesList #tr_cost .CaptionTD").empty();jQuery("#TblGrid_addquotesList #tr_cost .CaptionTD").append("Cost: ");jQuery("#TblGrid_addquotesList #tr_price .CaptionTD").empty();jQuery("#TblGrid_addquotesList #tr_price .CaptionTD").append("Sell Price: ");jQuery("#TblGrid_addquotesList #tr_inlineNote .CaptionTD").empty();jQuery("#TblGrid_addquotesList #tr_inlineNote .CaptionTD").append("Inline Note: ");
jQuery("#TblGrid_addquotesList #tr_productNote .CaptionTD").empty();jQuery("#TblGrid_addquotesList #tr_productNote .CaptionTD").append("Foot Note: ");aGlobalVariable="edit";a=$("#cost").val().replace(/[^0-9\.]+/g,"");var b=$("#price").val().replace(/[^0-9\.]+/g,"");$("#cost").val(Number(a));$("#price").val(Number(b));$(function(){var a={},c="";$("#product").autocomplete({minLength:2,select:function(a,c){var b=c.item.id,f=c.item.manufactureID;$("#quoteDetailID").val(b);$.ajax({url:"./jobtabs2/quoteDetails",
mType:"GET",data:{quoteDetailID:b,rxMasterID:f},success:function(a){$.each(a,function(a,c){manufacture=c.inlineNote;var b=c.paragraph,f=c.itemQuantity,d=c.rxManufacturerID,e=c.detailSequenceId;$("#paragraph").val(b);$("#manufacturer").val(f);$("#rxManufacturerID").val(d);$("#veFactoryId").val(e)})}})},source:function(b,f){var k=b.term;k in a?f(a[k]):c=$.getJSON("jobtabs2/productList",b,function(b,h,n){a[k]=b;n===c&&f(b)})},error:function(a){$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")}})});
$(function(){var a={},c="";$("#manufacturer").autocomplete({minLength:1,select:function(a,c){var b=c.item.id,f=c.item.value;$("#rxManufacturerID").val(b);$.ajax({url:"./jobtabs2/getFactoryID",type:"GET",data:{rxMasterID:b,descripition:f},success:function(a){$("#veFactoryId").val(a)}})},source:function(b,f){var k=b.term;k in a?f(a[k]):c=$.getJSON("jobtabs2/vendorsList",b,function(b,h,n){a[k]=b;n===c&&f(b)})},error:function(a){$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")}})})},
onInitializeForm:function(a){jQuery("#TblGrid_addquotesList #tr_product .DataTD").append('<img alt="search" src="./../resources/scripts/jquery-autocomplete/search.png" title="Must be atleast 5 characters long" style="padding-left: 10px;"><br>');jQuery("#TblGrid_addquotesList #tr_product .DataTD").append("<label>(Must be atleast 2 characters long)</label>");jQuery("#TblGrid_addquotesList #tr_manufacturer .DataTD").append('<img alt="search" src="./../resources/scripts/jquery-autocomplete/search.png" title="Must be atleast 1 characters long" style="padding-left: 10px;"><br>');
jQuery("#TblGrid_addquotesList #tr_product .CaptionTD").append('<span style="color:red;"> *</span>');jQuery("#TblGrid_addquotesList #tr_manufacturer .DataTD").append("<label>(Must be atleast 2 characters long)</label>");jQuery("#TblGrid_addquotesList #tr_manufacturer .CaptionTD").append('<span style="color:red;"> *</span>');jQuery("#TblGrid_addquotesList #tr_inlineNote").show();jQuery("#TblGrid_addquotesList #tr_productNote").show()},beforeSubmit:function(a,b){return"-1"===$("#quoteTypeDetail").val()||
""===$("#jobQuoteSubmittedBYFullName").val()?[!1,"Please provide 'Type' and 'Submitted By'"]:[!0,""]},afterSubmit:function(){$("#cData").trigger("click");$("#addquotesList").trigger("reloadGrid");for(var a=jQuery("#addquotesList").getRowData(),b=0,e=0,d=0;d<a.length;d++)var h=a[d],g=h.cost.replace(/[^0-9\.]+/g,""),b=b+Number(g),h=h.price.replace(/[^0-9\.]+/g,""),e=e+Number(h);a=$("#cost").val().replace(/[^0-9\.]+/g,"");d=$("#price").val().replace(/[^0-9\.]+/g,"");b+=Number(a);e+=Number(d);a=$("#joQuoteHeaderID").val();
$.ajax({url:"./jobtabs2/SaveQuoteCustomerDetailInfo",type:"GET",data:{totalCost:b,totalPrice:e,joQuoteHeaderID:a},success:function(a){a=jQuery(document.createElement("div"));jQuery(a).html('<span><b style="color:Green;">Quote details updated successfully.</b></span>');jQuery(a).dialog({modal:!0,width:300,height:150,title:"Success",buttons:[{height:35,text:"OK",click:function(){$(this).dialog("close")}}]}).dialog("open");jQuery(this).dialog("close");return!0}})},onclickSubmit:function(a){}},{closeAfterAdd:!0,
reloadAfterSubmit:!0,reloadGridAfterSubmit:!0,closeOnEscape:!0,modal:!0,jqModal:!0,viewPagerButtons:!1,addCaption:"Add Product",width:430,top:235,left:320,zIndex:1234,beforeShowForm:function(a){jQuery("#TblGrid_addquotesList #tr_product .CaptionTD").empty();jQuery("#TblGrid_addquotesList #tr_product .CaptionTD").append("Description: ");jQuery("#TblGrid_addquotesList #tr_product .CaptionTD").append('<span style="color:red;"> *</span>');jQuery("#TblGrid_addquotesList #tr_itemQuantity .CaptionTD").empty();
jQuery("#TblGrid_addquotesList #tr_itemQuantity .CaptionTD").append("Qty.: ");jQuery("#TblGrid_addquotesList #tr_paragraph .CaptionTD").empty();jQuery("#TblGrid_addquotesList #tr_paragraph .CaptionTD").append("Paragraph: ");jQuery("#TblGrid_addquotesList #tr_manufacturer .CaptionTD").empty();jQuery("#TblGrid_addquotesList #tr_manufacturer .CaptionTD").append("Vendors: ");jQuery("#TblGrid_addquotesList #tr_manufacturer .CaptionTD").append('<span style="color:red;"> *</span>');jQuery("#TblGrid_addquotesList #tr_cost .CaptionTD").empty();
jQuery("#TblGrid_addquotesList #tr_cost .CaptionTD").append("Cost: ");jQuery("#TblGrid_addquotesList #tr_price .CaptionTD").empty();jQuery("#TblGrid_addquotesList #tr_price .CaptionTD").append("Sell Price: ");jQuery("#TblGrid_addquotesList #tr_inlineNote .CaptionTD").empty();jQuery("#TblGrid_addquotesList #tr_inlineNote .CaptionTD").append("Inline Note: ");jQuery("#TblGrid_addquotesList #tr_productNote .CaptionTD").empty();jQuery("#TblGrid_addquotesList #tr_productNote .CaptionTD").append("Foot Note: ");
$(function(){var a={},c="";$("#product").autocomplete({minLength:2,select:function(a,c){var b=c.item.id,f=c.item.manufactureID;$("#quoteDetailID").val(b);$.ajax({url:"./jobtabs2/quoteDetails",mType:"GET",data:{quoteDetailID:b,rxMasterID:f},success:function(a){$.each(a,function(a,c){manufacture=c.inlineNote;var b=c.paragraph,f=c.itemQuantity,d=c.rxManufacturerID,e=c.detailSequenceId;$("#paragraph").val(b);$("#manufacturer").val(f);$("#rxManufacturerID").val(d);$("#veFactoryId").val(e)})}})},source:function(b,
h){var g=b.term;g in a?h(a[g]):c=$.getJSON("jobtabs2/productList",b,function(b,d,l){a[g]=b;l===c&&h(b)})},error:function(a){$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")}})});$(function(){var a={},c="";$("#manufacturer").autocomplete({minLength:1,select:function(a,c){var b=c.item.id,f=c.item.value;$("#rxManufacturerID").val(b);$.ajax({url:"./jobtabs2/getFactoryID",type:"GET",data:{rxMasterID:b,descripition:f},success:function(a){$("#veFactoryId").val(a)}})},source:function(b,
h){var g=b.term;g in a?h(a[g]):c=$.getJSON("jobtabs2/vendorsList",b,function(b,d,l){a[g]=b;l===c&&h(b)})},error:function(a){$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")}})})},onInitializeForm:function(a){jQuery("#TblGrid_addquotesList #tr_product .DataTD").append('<img alt="search" src="./../resources/scripts/jquery-autocomplete/search.png" title="Must be atleast 5 characters long" style="padding-left: 10px;"><br>');jQuery("#TblGrid_addquotesList #tr_product .DataTD").append("<label>(Must be atleast 2 characters long)</label>");
jQuery("#TblGrid_addquotesList #tr_manufacturer .DataTD").append('<img alt="search" src="./../resources/scripts/jquery-autocomplete/search.png" title="Must be atleast 1 characters long" style="padding-left: 10px;"><br>');jQuery("#TblGrid_addquotesList #tr_product .CaptionTD").append('<span style="color:red;"> *</span>');jQuery("#TblGrid_addquotesList #tr_manufacturer .DataTD").append("<label>(Must be atleast 2 characters long)</label>");jQuery("#TblGrid_addquotesList #tr_manufacturer .CaptionTD").append('<span style="color:red;"> *</span>');
jQuery("#TblGrid_addquotesList #tr_inlineNote").show();jQuery("#TblGrid_addquotesList #tr_productNote").show()},onclickSubmit:function(b){aGlobalVariable="add";b=a;"edit"!==aGlobalVariable&&($("#joQuoteHeaderID").val(b),$("#addquotesList").jqGrid("setGridParam",{postData:{joQuoteHeaderID:b}}),jQuery("#joQuoteheader").text(b),a=b,$("#joHeaderID").val(a));if(0===Number(b)){var f=$("#joHeaderID").val();$("#addquotesList").jqGrid("setGridParam",{postData:{joQuoteHeaderID:f}});jQuery("#joQuoteheader").text(f);
a=f;$("#joHeaderID").val(a)}b>a&&(a=b);return{joQuoteHeaderID:a,quoteheaderid:b}},beforeSubmit:function(a,b){aGlobalVariable="edit";return"-1"===$("#quoteTypeDetail").val()||""===$("#jobQuoteSubmittedBYFullName").val()?[!1,"Please provide 'Type' and 'Submitted By'"]:[!0,""]},afterSubmit:function(){$("#cData").trigger("click");$("#addquotesList").trigger("reloadGrid");for(var a=jQuery("#addquotesList").getRowData(),b=0,e=0,d=0;d<a.length;d++)var h=a[d],g=h.cost.replace(/[^0-9\.]+/g,""),b=b+Number(g),
h=h.price.replace(/[^0-9\.]+/g,""),e=e+Number(h);a=$("#cost").val().replace(/[^0-9\.]+/g,"");d=$("#price").val().replace(/[^0-9\.]+/g,"");b+=Number(a);e+=Number(d);a=$("#joQuoteHeaderID").val();$.ajax({url:"./jobtabs2/SaveQuoteCustomerDetailInfo",type:"GET",data:{totalCost:b,totalPrice:e,joQuoteHeaderID:a},success:function(a){a=jQuery(document.createElement("div"));jQuery(a).html('<span><b style="color:Green;">Quote details updated successfully.</b></span>');jQuery(a).dialog({modal:!0,width:300,height:150,
title:"keySuccess.",buttons:[{height:35,text:"OK",click:function(){$(this).dialog("close")}}]}).dialog("open");jQuery(this).dialog("close");return!0}})}},{closeOnEscape:!0,reloadAfterSubmit:!0,modal:!0,jqModal:!0,width:270,top:296,left:450,zIndex:1234,caption:"Delete Product",msg:"Delete the Product?",onclickSubmit:function(a){aGlobalVariable="del";var b=jQuery("#addquotesList").jqGrid("getGridParam","selrow");a=jQuery("#addquotesList").getCell(b,7);for(var e=jQuery("#addquotesList").getCell(b,5),
d=jQuery("#addquotesList").getCell(b,6),h=jQuery("#addquotesList").getRowData(),g=b=0,k=0;k<h.length;k++)var m=h[k],l=m.cost.replace(/[^0-9\.]+/g,""),b=b+Number(l),m=m.price.replace(/[^0-9\.]+/g,""),g=g+Number(m);e=e.replace(/[^0-9\.]+/g,"");d=d.replace(/[^0-9\.]+/g,"");b-=Number(e);g-=Number(d);e=$("#joQuoteHeaderID").val();$.ajax({url:"./jobtabs2/SaveQuoteCustomerDetailInfo",type:"GET",data:{totalCost:b,totalPrice:g,joQuoteHeaderID:e},success:function(a){a=jQuery(document.createElement("div"));
jQuery(a).html('<span><b style="color:Green;">Quote details updated successfully.</b></span>');jQuery(a).dialog({modal:!0,width:300,height:150,title:"Success",buttons:[{height:35,text:"OK",click:function(){$(this).dialog("close")}}]}).dialog("open");jQuery(this).dialog("close");return!0}});return{joQuoteDetailID:a}}});var b=$.fn.jqGrid.addRowData;$.jgrid.extend({addRowData:function(a,f,e,d){if("afterSelected"===e||"beforeSelected"===e)"undefined"===typeof d&&null!==this[0].p.selrow?(d=this[0].p.selrow,
e="afterSelected"===e?"after":"before"):e="afterSelected"===e?"last":"first";return b.call(this,a,f,e,d)}});jQuery("#addquotesList").jqGrid("inlineNav","#addquotespager",{addParams:{position:"afterSelected"}});jQuery("#addquotesList").jqGrid("bindKeys",{onEnter:function(a){saveProductNote()}})}
$(function(){var a={},b="";$("#quoteTypeDetail").autocomplete({minLength:1,timeout:1E3,select:function(a,b){var e=b.item.id;$("#quoteTypeDetailID").val(e)},source:function(c,f){var e=c.term;e in a?f(a[e]):b=$.getJSON("employeeCrud/customerType",c,function(c,h,g){a[e]=c;g===b&&f(c)})},error:function(a){$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")}})});
function inlineFormatter(a,b,c){return"<div style='width: 52px;'><a onclick='openLineItemDialog()' style='float: left;padding: 0px 5px;'><img src='./../resources/images/lineItem.png' title='Inline Item' align='middle' style='vertical-align: middle;'></a><a onclick='openFooterLineDialog()' style='float: left;padding: 0px 5px;'><img src='./../resources/images/footNote.png' title='Foot Note' align='middle' style='vertical-align: middle;'></a></div>"}
function inlineImage(a,b,c){return""!==a&&null!==a?"<img src='./../resources/images/lineItem_new.png' title='Inline Item'  style='padding: 2px;'>":""}
function onDoubleClickEditLineItems(a){aAddandEdit="edit";$("#inlneNoteHideShow").css("display","none");var b=$("#addquotesList").jqGrid("getCell",a,"product"),c=$("#addquotesList").jqGrid("getCell",a,"paragraph"),f=$("#addquotesList").jqGrid("getCell",a,"manufacturer"),e=$("#addquotesList").jqGrid("getCell",a,"itemQuantity"),d=$("#addquotesList").jqGrid("getCell",a,"cost"),h=$("#addquotesList").jqGrid("getCell",a,"price"),g=$("#addquotesList").jqGrid("getCell",a,"joQuoteDetailID"),k=$("#addquotesList").jqGrid("getCell",
a,"rxManufacturerID"),m=$("#addquotesList").jqGrid("getCell",a,"joQuoteHeaderID"),l=$("#addquotesList").jqGrid("getCell",a,"veFactoryId"),n=$("#addquotesList").jqGrid("getCell",a,"inlineNote"),p=$("#addquotesList").jqGrid("getCell",a,"productNote"),d=d.replace(/[^0-9\.]+/g,""),q=h.replace(/[^0-9\.]+/g,""),h=d.replace(".00",""),d=q.replace(".00","");a=$("#addquotesList").jqGrid("getCell",a,"percentage");0===h&&(h="");$("#cost").val(h);0===d&&(d="");$("#price").val(d);$("#product").val(b);$("#paragraph").val(c);
$("#manufacturer").val(f);$("#itemQuantity").val(e);$("#joQuoteDetailID").val(g);$("#rxManufacturerID").val(k);$("#joQuoteHeaderID").val(m);$("#veFactoryId").val(l);$("#percentage").val(a);$("#productNote").val(p);$("#inlineNote").val(n);$("#addButtonDiv").dialog({height:400});jQuery("#addButtonDiv").dialog("open");return!0}
function imgFmatter(a,b,c){return"<div><a onclick='editQuoteFrom()'><img src='./../resources/images/edit.png' title='Edit Line Items' align='middle' style='padding: 2px 5px;'></a><a onclick='deleteQuoteFrom()'><img src='./../resources/images/delete.png' title='Delete Line Items' align='middle' style='padding: 2px 5px;'></a><a onclick='addOpenLineItemDialog()'><img src='./../resources/images/lineItem_new.png' title='Line Items' align='middle' style='padding: 2px 5px;'></a></div>"}
function addOpenLineItemDialog(){var a=$("#addquotesList").jqGrid("getGridParam","selrow");if(null===a)return a=jQuery(document.createElement("div")),jQuery(a).attr("id","msgDlg"),jQuery(a).html('<span><b style="color:red;">Please select a line item to add Line Note</b></span>'),jQuery(a).dialog({modal:!0,width:300,height:150,title:"Warning",buttons:[{height:35,text:"OK",click:function(){$(this).dialog("close")}}]}).dialog("open"),!1;a=$("#addquotesList").jqGrid("getCell",a,"inlineNote").replace("&And",
"'");area=(new nicEditor({buttonList:"bold italic underline left center right justify ol ul fontSize fontFamily fontFormat forecolor".split(" "),maxHeight:240})).panelInstance("lineItemId");$(".nicEdit-main").empty();$(".nicEdit-main").append(a);jQuery("#addInLineItem").dialog("open");$(".nicEdit-main").focus();return!0}
function openFooterLineDialog(){var a=$("#addquotesList").jqGrid("getGridParam","selrow"),a=$("#addquotesList").jqGrid("getCell",a,"productNote");$("#footerLine").val("");$("#footerLine").val(a);!1===a&&(a="");var b=jQuery(document.createElement("div"));jQuery(b).html('<table><tr><td><textarea id="footerLine" rows="5" cols="58">'+a+"</textarea></td></tr></table>");jQuery(b).dialog({modal:!0,height:210,width:535,title:"Footnote",buttons:{Submit:function(){var a=$("#footerLine").val();footerNoteInfo(a);
jQuery(this).dialog("close");$("#addquotesList").trigger("reloadGrid")},Cancel:function(){jQuery(this).dialog("close")}}}).dialog("open")}
function addQuoteFrom(){aAddandEdit="add";$("#inlneNoteHideShow").show();var a=jQuery(document.createElement("div"));if("-1"===$("#quoteTypeDetail").val())return jQuery(a).html('<span><b style="color:red;">Please Provide "Type"</b></span>'),jQuery(a).dialog({modal:!0,width:300,height:150,title:"Warning",buttons:[{height:35,text:"OK",click:function(){$(this).dialog("close")}}]}).dialog("open"),!1;if(""===$("#jobQuoteSubmittedBYFullName").val())return jQuery(a).html('<span><b style="color:red;">Please Provide "Submitted By"</b></span>'),
jQuery(a).dialog({modal:!0,width:300,height:150,title:"Warning",buttons:[{height:35,text:"OK",click:function(){$(this).dialog("close")}}]}).dialog("open"),!1;$("#product").val("");$("#paragraph").val("");$("#manufacturer").val("");$("#itemQuantity").val("");$("#cost").val("");$("#price").val("");$("#joQuoteDetailID").val("");$("#joQuoteDetailID").val("");$("#rxManufacturerID").val("");$("#joQuoteHeaderID").val("");$("#veFactoryId").val("");$("#percentage").val("");$("#inlineNote").val("");$("#productNote").val("");
$("#addButtonDiv").dialog({height:450});jQuery("#addButtonDiv").dialog("open");return!0}
function editQuoteFrom(){aAddandEdit="edit";$("#inlneNoteHideShow").css("display","none");if(null===$("#addquotesList").jqGrid("getGridParam","selrow")){var a=jQuery(document.createElement("div"));jQuery(a).attr("id","msgDlg");jQuery(a).html('<span><b style="color:red;">Please select a line item to edit</b></span>');jQuery(a).dialog({modal:!0,width:300,height:150,title:"Warning",buttons:[{height:35,text:"OK",click:function(){$(this).dialog("close")}}]}).dialog("open");return!1}var b=$("#addquotesList").jqGrid("getGridParam",
"selrow"),a=$("#addquotesList").jqGrid("getCell",b,"product"),c=$("#addquotesList").jqGrid("getCell",b,"paragraph"),f=$("#addquotesList").jqGrid("getCell",b,"manufacturer"),e=$("#addquotesList").jqGrid("getCell",b,"itemQuantity"),d=$("#addquotesList").jqGrid("getCell",b,"cost"),h=$("#addquotesList").jqGrid("getCell",b,"price"),g=$("#addquotesList").jqGrid("getCell",b,"joQuoteDetailID"),k=$("#addquotesList").jqGrid("getCell",b,"rxManufacturerID"),m=$("#addquotesList").jqGrid("getCell",b,"joQuoteHeaderID"),
l=$("#addquotesList").jqGrid("getCell",b,"veFactoryId"),n=$("#addquotesList").jqGrid("getCell",b,"inlineNote"),p=$("#addquotesList").jqGrid("getCell",b,"productNote"),d=d.replace(/[^0-9\.]+/g,""),q=h.replace(/[^0-9\.]+/g,""),h=d.replace(".00",""),d=q.replace(".00",""),b=$("#addquotesList").jqGrid("getCell",b,"percentage");0===h&&(h="");$("#cost").val(h);0===d&&(d="");$("#price").val(d);$("#product").val(a);$("#paragraph").val(c);$("#manufacturer").val(f);$("#itemQuantity").val(e);$("#joQuoteDetailID").val(g);
$("#rxManufacturerID").val(k);$("#joQuoteHeaderID").val(m);$("#veFactoryId").val(l);$("#percentage").val(b);$("#productNote").val(p);$("#inlineNote").val(n);$("#addButtonDiv").dialog({height:400});jQuery("#addButtonDiv").dialog("open");return!0}
function LineItemInfo(){var a=$("#addInLineItemID").find(".nicEdit-main").html(),b=$("#addquotesList").jqGrid("getGridParam","selrow"),c=$("#addquotesList").jqGrid("getCell",b,"joQuoteDetailID"),b=$("#addquotesList").jqGrid("getCell",b,"joQuoteHeaderID"),f=[];f.push(a);f.push(b);f.push(c);$.ajax({url:"./jobtabs2/SavelinetextInfo",type:"POST",data:{lineItem:f},success:function(a){area.removeInstance("lineItemId");jQuery("#addInLineItem").dialog("close");$("#addquotesList").jqGrid("GridUnload");loadQuotesListDetails();
$("#addquotesList").trigger("reloadGrid");$.each(a,function(a,b){})}})}function footerNoteInfo(a){var b=$("#addquotesList").jqGrid("getGridParam","selrow"),c=$("#addquotesList").jqGrid("getCell",b,"joQuoteDetailID"),b=$("#addquotesList").jqGrid("getCell",b,"joQuoteHeaderID");$.ajax({url:"./jobtabs2/SavelinetextInfo",type:"POST",data:{footerLine:a,quoteDetailID:c,quoteHeaderID:b},success:function(b){$("#footerLineText").val(a);$.each(b,function(a,b){})}})}
function addManufacture(){document.location.href="./vendors";jQuery("#addNewVendor").dialog("open")}jQuery(function(){jQuery("#addInLineItem").dialog({autoOpen:!1,modal:!0,title:"InLine Note",height:350,width:600,buttons:{},close:function(){return!0}})});function cancelInLineNote(){area.removeInstance("lineItemId");jQuery("#addInLineItem").dialog("close");return!1}
function addNewLineItemDialog(){var a=$("#addquotesList").jqGrid("getGridParam","selrow");$("#addquotesList_iladd").trigger("click");a=$("#addquotesList").jqGrid("getCell",a,"joQuoteHeaderID");$("#new_row_joQuoteHeaderID").val(a);return!0}function nospacesEditUser(a){a.value.match(/\s/g)&&(a.value=a.value.replace(/\s/g,""))}
function saveProductNote(){var a=$("#new_row_product").val(),b=$("#new_row_itemQuantity").val(),c=$("#new_row_paragraph").val(),f=$("#new_row_manufacturer").val(),e=$("#new_row_cost").val().replace(/[^0-9\.]+/g,"").replace(".00",""),d=$("#new_row_price").val().replace(/[^0-9\.]+/g,"").replace(".00",""),h=$("#new_row_rxManufacturerID").val(),g=$("#new_row_joQuoteHeaderID").val(),k=$("#new_row_veFactoryId").val();$.ajax({url:"./jobtabs2/manpulaterProductQuotes",type:"POST",data:"product="+a+"&paragraph="+
c+"&rxManufacturerID="+h+"&manufacturer="+f+"&itemQuantity="+b+"&cost="+e+"&oper=add&joQuoteHeaderID="+g+"&quoteheaderid=&veFactoryId="+k+"&inlineNote=&footnote=&productNote=&price="+d,success:function(a){jQuery("#addButtonDiv").dialog("close");$("#addquotesList").jqGrid("GridUnload");loadQuotesListDetails();$("#addquotesList").trigger("reloadGrid");a=jQuery(document.createElement("div"));jQuery(a).html('<span><b style="color:Green;">Quote details updated.</b></span>');jQuery(a).dialog({modal:!0,
width:300,height:150,title:"Success",buttons:[{height:35,text:"OK",click:function(){$(this).dialog("close")}}]}).dialog("open")}});return!1}
function upAndDownImage(a,b,c){a="<div>";c=b.rowId;var f=Number(b.rowId)+1;a="1"===b.rowId?a+("<a id='"+f+"_downIcon' onclick='downLineItem()' style='padding: 40px;'><img src='./../resources/images/downArrowLineItem.png' title='Move Down & Save'></a>"):a+("<a id='"+c+"_upIcon' onclick='upLineItem()' style='padding: 8px;'><img src='./../resources/images/upArrowLineItem.png' title='Move Up & Save'></a>")+("<a id='"+f+"_downIcon' onclick='downLineItem()' style='padding: 8px;'><img src='./../resources/images/downArrowLineItem.png' title='Move Down & Save'></a>");
return a+="</div>"}
function upLineItem(){var a=$("#addquotesList").jqGrid("getGridParam","selrow");if(null===a)return a=jQuery(document.createElement("div")),jQuery(a).attr("id","msgDlg"),jQuery(a).html('<span><b style="color:red;">Please select a line item to move to up or down.</b></span>'),jQuery(a).dialog({modal:!0,width:300,height:150,title:"Warning",buttons:[{height:35,text:"OK",click:function(){$(this).dialog("close")}}]}).dialog("open"),!1;var b=$("#addquotesList").jqGrid("getCell",a,"position"),c=$("#addquotesList").jqGrid("getCell",
a,"joQuoteDetailID"),f=$("#addquotesList").jqGrid("getCell",a,"joQuoteHeaderID"),e=Number(a)-1,d=$("#addquotesList").jqGrid("getCell",e,"position"),h=$("#addquotesList").jqGrid("getCell",e,"joQuoteDetailID");updateLineItemPosition(a,b,c,f,e,d,h,"upLineItem");return!1}
function downLineItem(){var a=$("#addquotesList").jqGrid("getGridParam","selrow");if(null===a)return a=jQuery(document.createElement("div")),jQuery(a).attr("id","msgDlg"),jQuery(a).html('<span><b style="color:red;">Please select a line item to move to up or down.</b></span>'),jQuery(a).dialog({modal:!0,width:300,height:150,title:"Warning",buttons:[{height:35,text:"OK",click:function(){$(this).dialog("close")}}]}).dialog("open"),!1;var b=$("#addquotesList").jqGrid("getCell",a,"position"),c=$("#addquotesList").jqGrid("getCell",
a,"joQuoteDetailID"),f=$("#addquotesList").jqGrid("getCell",a,"joQuoteHeaderID"),e=Number(a)+1,d=$("#addquotesList").jqGrid("getCell",e,"position"),h=$("#addquotesList").jqGrid("getCell",e,"joQuoteDetailID");updateLineItemPosition(a,b,c,f,e,d,h,"downLineItem");return!1}
function updateLineItemPosition(a,b,c,f,e,d,h,g){$.ajax({url:"./jobtabs2/updateLineItemPosition",type:"POST",data:{selectedRowID:a,selectedPositionDetailID:b,selectedQuoteDetailID:c,selectedJoQuoteHeaderID:f,abovePositionRowID:e,abovePositionDetailID:d,aboveQuoteDetailID:h,oper:g},success:function(a){$("#addquotesList").jqGrid("GridUnload");loadQuotesListDetails();$("#addquotesList").trigger("reloadGrid")}});return!1}function removeNull(a){return null===a?"":a}
jQuery(function(){jQuery("#printLineItemDialog").dialog({autoOpen:!1,modal:!0,height:840,width:1160,top:1E3,position:[$(window).width()/2-580,190],buttons:{},create:function(a,b){$(this).parents(".ui-dialog:first").find(".ui-dialog-titlebar").css("display","none");$(this).parents(".ui-dialog").css("background-color","#FAFAFA");$(this).parents(".ui-widget-content").css("padding","0");$(this).parents(".ui-dialog").css("border","0 none")},close:function(){return!0}})});
function addLineItemDialog(){var a=$("#quantityValuePrintID").val(),b=$("#quantityValuePrintParaID").val(),c=$("#quantityValuePrintManufID").val(),f=$("#quantityValuePrintSpecID").val(),e=$("#quantityValuePrintPriceID").val();$("#custombuttons").show();if(null===$("#addquotesList").jqGrid("getGridParam","selrow")){var d=jQuery(document.createElement("div"));jQuery(d).attr("id","msgDlg");jQuery(d).html('<span><b style="color:red;">Please select a line item to edit</b></span>');jQuery(d).dialog({modal:!0,
width:300,height:150,title:"Warning",buttons:[{height:35,text:"OK",click:function(){$(this).dialog("close")}}]}).dialog("open");return!1}$("#projectName").empty();d=" "+$("#jobName_ID").text();$("#projectName").text(d);d=$("#addquotesList").jqGrid("getGridParam","selrow");d=$("#addquotesList").jqGrid("getCell",d,"joQuoteHeaderID");$.ajax({url:"./jobtabs2/getLineItemValues",type:"GET",data:{joQuoteHeaderID:d},success:function(d){var g='<tr><th align="center">No.</th><th align="center">Description</th>';
"1"===a&&(g+='<th align="center">Qty.</th>');"1"===b&&(g+='<th align="center">Paragraph</th>');"1"===c&&(g+='<th align="center">Vendors</th>');"1"===f&&(g+='<th align="center">Spec</th>');g+='<th align="center">Cost</th>';g+='<th align="center">Mult</th>';"1"===e&&(g+='<th align="center">Sell Price</th>');g+="</tr>";$.each(d,function(d,h){g+='<tr><td align="center"><label>'+(d+1)+".</label></td><td><label>"+removeNull(h.product)+"</label></td>";"1"===a&&(g+='<td align="center"><label>'+removeNull(h.itemQuantity)+
"</label></td>");"1"===b&&(g+="<td><label>"+removeNull(h.paragraph)+"</label></td>");"1"===c&&(g+="<td><label>"+removeNull(h.manufacturer)+"</label></td>");"1"===f&&(g+="<td><label>"+removeNull(h.spec)+"</label></td>");g+='<td align="right"><label>'+formatCurrency(h.cost)+"</label></td>";g+="<td><label>"+removeNull(h.mult)+"</label></td>";"1"===e&&(g+='<td align="right"><label>'+formatCurrency(h.price)+"</label></td>");g+="</tr>"});$("#printValues").empty();$("#printValues").append(g)}});jQuery("#printLineItemDialog").dialog("open");
return!0}function printLineItem(){$("#custombuttons").css("display","none");$("#printLineItemDialog").jqprint();return jQuery("#printLineItemDialog").dialog("close")}function cancelPrintableView(){jQuery("#printLineItemDialog").dialog("close");return!1}jQuery(function(){jQuery("#quotePropertiesDialog").dialog({autoOpen:!1,modal:!0,title:"Quote Properties",height:450,width:345,buttons:{},close:function(){return!0}})});
function changeQuantity(){$("#quantityDisplayID").is(":checked")?($("#quantityLabelID").empty(),$("#quantityLabelID").append("(Yes)")):($("#quantityLabelID").empty(),$("#quantityLabelID").append("(No)"));$("#quantityPrintID").is(":checked")?($("#quantityLabelPrintID").empty(),$("#quantityLabelPrintID").append("(Yes)")):($("#quantityLabelPrintID").empty(),$("#quantityLabelPrintID").append("(No)"));$("#quantityDisplayParaID").is(":checked")?($("#paraLabelID").empty(),$("#paraLabelID").append("(Yes)")):
($("#paraLabelID").empty(),$("#paraLabelID").append("(No)"));$("#quantityprintParaID").is(":checked")?($("#paraLabelPrintID").empty(),$("#paraLabelPrintID").append("(Yes)")):($("#paraLabelPrintID").empty(),$("#paraLabelPrintID").append("(No)"));$("#quantityDisplayManufID").is(":checked")?($("#manufatuereLabelID").empty(),$("#manufatuereLabelID").append("(Yes)")):($("#manufatuereLabelID").empty(),$("#manufatuereLabelID").append("(No)"));$("#quantityPrintManufID").is(":checked")?($("#manufatuereLabelPrintID").empty(),
$("#manufatuereLabelPrintID").append("(Yes)")):($("#manufatuereLabelPrintID").empty(),$("#manufatuereLabelPrintID").append("(No)"));$("#quantityDisplaySpecID").is(":checked")?($("#specLabelID").empty(),$("#specLabelID").append("(Yes)")):($("#specLabelID").empty(),$("#specLabelID").append("(No)"));$("#quantityprintSpecID").is(":checked")?($("#specLabelPrintID").empty(),$("#specLabelPrintID").append("(Yes)")):($("#specLabelPrintID").empty(),$("#specLabelPrintID").append("(No)"));$("#quantityDisplayCostID").is(":checked")?
($("#costLabelID").empty(),$("#costLabelID").append("(Yes)")):($("#costLabelID").empty(),$("#costLabelID").append("(No)"));$("#quantityDisplayMultiID").is(":checked")?($("#multiLabelID").empty(),$("#multiLabelID").append("(Yes)")):($("#multiLabelID").empty(),$("#multiLabelID").append("(No)"));$("#quantityprintMultiID").is(":checked")?($("#multiLabelPrintID").empty(),$("#multiLabelPrintID").append("(Yes)")):($("#multiLabelPrintID").empty(),$("#multiLabelPrintID").append("(No)"));$("#quantityDisplayPriceID").is(":checked")?
($("#priceLabelID").empty(),$("#priceLabelID").append("(Yes)")):($("#priceLabelID").empty(),$("#priceLabelID").append("(No)"));$("#quantityprintPriceID").is(":checked")?($("#priceLabelPrintID").empty(),$("#priceLabelPrintID").append("(Yes)")):($("#priceLabelPrintID").empty(),$("#priceLabelPrintID").append("(No)"))}
function setQuotePorperties(){var a=$("#quantityValueDisplayID").val(),b=$("#quantityValuePrintID").val(),c=$("#quantityValueDisplayParaID").val(),f=$("#quantityValuePrintParaID").val(),e=$("#quantityValueDisplayManufID").val(),d=$("#quantityValuePrintManufID").val(),h=$("#quantityValueDisplaySpecID").val(),g=$("#quantityValuePrintSpecID").val(),k=$("#quantityValueprintCostID").val(),m=$("#quantityValueDispalyMultiID").val(),l=$("#quantityValueprintMultiID").val(),n=$("#quantityValueDisplayPriceID").val(),
p=$("#quantityValuePrintPriceID").val(),q=$("#inlineNotePage").val(),r=$("#printLineID").val(),s=$("#summationID").val(),t=$("#showTotallingID").val();"1"===a&&($("#quantityDisplayID").attr("checked",!0),$("#quantityLabelID").empty(),$("#quantityLabelID").append("(Yes)"));"1"===b&&($("#quantityPrintID").attr("checked",!0),$("#quantityLabelPrintID").empty(),$("#quantityLabelPrintID").append("(Yes)"));"1"===c&&($("#quantityDisplayParaID").attr("checked",!0),$("#paraLabelID").empty(),$("#paraLabelID").append("(Yes)"));
"1"===f&&($("#quantityprintParaID").attr("checked",!0),$("#paraLabelPrintID").empty(),$("#paraLabelPrintID").append("(Yes)"));"1"===e&&($("#quantityDisplayManufID").attr("checked",!0),$("#manufatuereLabelID").empty(),$("#manufatuereLabelID").append("(Yes)"));"1"===d&&($("#quantityPrintManufID").attr("checked",!0),$("#manufatuereLabelPrintID").empty(),$("#manufatuereLabelPrintID").append("(Yes)"));"1"===h&&($("#quantityDisplaySpecID").attr("checked",!0),$("#specLabelID").empty(),$("#specLabelID").append("(Yes)"));
"1"===g&&($("#quantityprintSpecID").attr("checked",!0),$("#specLabelPrintID").empty(),$("#specLabelPrintID").append("(Yes)"));"1"===k&&($("#quantityDisplayCostID").attr("checked",!0),$("#costLabelID").empty(),$("#costLabelID").append("(Yes)"));"1"===m&&($("#quantityDisplayMultiID").attr("checked",!0),$("#multiLabelID").empty(),$("#multiLabelID").append("(Yes)"));"1"===l&&($("#quantityprintMultiID").attr("checked",!0),$("#multiLabelPrintID").empty(),$("#multiLabelPrintID").append("(Yes)"));"1"===n&&
($("#quantityDisplayPriceID").attr("checked",!0),$("#priceLabelID").empty(),$("#priceLabelID").append("(Yes)"));"1"===p&&($("#quantityprintPriceID").attr("checked",!0),$("#priceLabelPrintID").empty(),$("#priceLabelPrintID").append("(Yes)"));"1"===q&&$("#inlineFullNotePageID").attr("checked",!0);"1"===r&&$("#PrintLineNumID").attr("checked",!0);"1"===s&&$("#printSummationID").attr("checked",!0);"1"===t&&$("#hidePriceID").attr("checked",!0);jQuery("#quotePropertiesDialog").dialog("open");return!0}
function saveQuoteProperties(){var a=$("#quotePropertiesFormID").serialize(),b=$("#joHeaderID").val();$.ajax({url:"./jobtabs2/updateQuoteProperties",type:"POST",data:a+"&joQuoteHeaderID="+b,success:function(a){$("#quantityValueDisplayID").val(a.displayQuantity);$("#quantityValuePrintID").val(a.printQuantity);$("#quantityValueDisplayParaID").val(a.displayParagraph);$("#quantityValuePrintParaID").val(a.printParagraph);$("#quantityValueDisplayManufID").val(a.displayManufacturer);$("#quantityValuePrintManufID").val(a.printManufacturer);
$("#quantityValueDisplaySpecID").val(a.displaySpec);$("#quantityValuePrintSpecID").val(a.printSpec);$("#quantityValueprintCostID").val(a.displayCost);$("#quantityValuePrintCostID").val(a.printCost);$("#quantityValueDispalyMultiID").val(a.displayMult);$("#quantityValueprintMultiID").val(a.printMult);$("#quantityValueDisplayPriceID").val(a.displayPrice);$("#quantityValuePrintPriceID").val(a.printPrice);$("#inlineNotePage").val(a.notesFullWidth);$("#printLineID").val(a.lineNumbers);$("#summationID").val(a.printTotal);
$("#showTotallingID").val(a.hidePrice)}});jQuery("#quotePropertiesDialog").dialog("close");return!0}function cancelQuoteProperties(){jQuery("#quotePropertiesDialog").dialog("close");return!1}var aAddandEdit,aDetailId,aListDetailId="",cost=$("#cost").val().replace(/[^0-9\.]+/g,""),price=$("#price").val().replace(/[^0-9\.]+/g,"");$("#cost").val(cost);$("#price").val(price);
$(function(){var a={},b="";$("#product").autocomplete({minLength:2,select:function(a,b){var e=b.item.id,d=b.item.manufactureID;$("#quoteDetailID").val(e);$.ajax({url:"./jobtabs2/quoteDetails",mType:"GET",data:{quoteDetailID:e,rxMasterID:d},success:function(a){$.each(a,function(a,b){manufacture=b.inlineNote;var c=b.paragraph,d=b.itemQuantity,e=b.rxManufacturerID,f=b.detailSequenceId;$("#paragraph").val(c);$("#manufacturer").val(d);$("#rxManufacturerID").val(e);$("#veFactoryId").val(f)})}})},source:function(c,
f){var e=c.term;e in a?f(a[e]):b=$.getJSON("jobtabs2/productList",c,function(c,h,g){a[e]=c;g===b&&f(c)})},error:function(a){$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")}})});
$(function(){var a={},b="";$("#manufacturer").autocomplete({minLength:1,select:function(a,b){var e=b.item.id,d=b.item.value;$("#rxManufacturerID").val(e);$.ajax({url:"./jobtabs2/getFactoryID",type:"GET",data:{rxMasterID:e,descripition:d},success:function(a){$("#veFactoryId").val(a)}})},source:function(c,f){var e=c.term;e in a?f(a[e]):b=$.getJSON("jobtabs2/vendorsList",c,function(c,h,g){a[e]=c;g===b&&f(c)})},error:function(a){$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")}})});
function deleteQuoteFrom(){var a=$("#addquotesList"),b=jQuery(document.createElement("div"));if(null!==a.jqGrid("getGridParam","selrow"))jQuery(b).html('<span><b style="color: red;">Delete the Line Item?</b></span>'),jQuery(b).dialog({modal:!0,width:300,height:120,title:"Confirm Delete",buttons:{Submit:function(){var a=$("#addquotesList").jqGrid("getGridParam","selrow"),a=$("#addquotesList").jqGrid("getCell",a,"joQuoteDetailID");$.ajax({url:"./jobtabs2/deleteQuickQuoteDetail",mType:"GET",data:{joHeaderQuoteDetailID:a},
success:function(a){$("#addquotesList").trigger("reloadGrid");$.each(a,function(a,b){})}});jQuery(this).dialog("close");$("#addquotesList").trigger("reloadGrid")},Cancel:function(){jQuery(this).dialog("close")}}}).dialog("open");else return jQuery(b).attr("id","msgDlg"),jQuery(b).html('<span><b style="color:red;">Please select a line item to delete</b></span>'),jQuery(b).dialog({modal:!0,width:300,height:150,title:"Warning",buttons:[{height:35,text:"OK",click:function(){$(this).dialog("close")}}]}).dialog("open"),
!1;return!0}jQuery(function(){jQuery("#addButtonDiv").dialog({autoOpen:!1,height:450,width:600,title:"Add/Edit Line Item",modal:!0,buttons:{},close:function(){$("#addButtonForm").validationEngine("hideAll");return!0}})});
function pricePercentageCost(){if(!$("#addButtonForm").validationEngine("validate"))return!1;var a=$("#percentage").val(),b=$("#cost").val().replace(/[^0-9\.]+/g,"");if("0"===a)return priceEmpty=b,$("#price").val(priceEmpty),!1;if(100<=a)return $("#maginAlert").fadeOut("slow"),$("#maginAlert").fadeIn("slow",function(){$("#maginAlert").fadeOut(7E3)}),!1;""!==a&&(price=b/[(100-a)/100],$("#price").val(""),$("#price").val(Math.round(price)));return!0}
function costPercentage(){if(!$("#addButtonForm").validationEngine("validate"))return!1;var a=$("#percentage").val(),b=$("#cost").val().replace(/[^0-9\.]+/g,""),c=$("#price").val().replace(/[^0-9\.]+/g,"");if(""!==c&&"0"!==c&&""!==b&&"0"!==b&&""!==percentage&&"0"!==percentage)return percent=100*[1-b/c],$("#percentage").val(""),$("#percentage").val(a),!0}
function openLineItemDialog(){var a=$("#addquotesList").jqGrid("getGridParam","selrow"),a=$("#addquotesList").jqGrid("getCell",a,"inlineNote");$("#lineItem").val("");$("#lineItem").val(a);!1===a&&(a="");var b=jQuery(document.createElement("div"));jQuery(b).html('<table><tr><td><textarea id="lineItem" rows="24" cols="54">'+a+"</textarea></td></tr></table>");jQuery(b).dialog({modal:!0,width:500,height:500,title:"InLine Note",buttons:{Submit:function(){var a=$("#lineItem").val();LineItemInfo(a);jQuery(this).dialog("close");
$("#addquotesList").trigger("reloadGrid")},Cancel:function(){jQuery(this).dialog("close")}}}).dialog("open")}
function saveQuoteNavigator(){var a=jQuery(document.createElement("div"));if("add"===aAddandEdit){if(!$("#addButtonForm").validationEngine("validate"))return!1;if(""===$("#rxManufacturerID").val())return jQuery(a).html('<span><b style="color:red;">This Vendor is not available. Please choose another Vendor (or) Add the Vendor Using Add Manufacture.</b></span>'),jQuery(a).dialog({modal:!0,width:320,height:160,title:"Warning",buttons:[{height:35,text:"OK",click:function(){$(this).dialog("close")}}]}).dialog("open"),
!1;addQuoteFormDialog();jQuery("#addButtonDiv").dialog("close");return!0}if("edit"===aAddandEdit){if(!$("#addButtonForm").validationEngine("validate"))return!1;if(""===$("#rxManufacturerID").val())return jQuery(a).html('<span><b style="color:red;">This Vendor is not available. Please choose another Vendor (or) Add the Vendor Using Add Manufacture.</b></span>'),jQuery(a).dialog({modal:!0,width:320,height:160,title:"Warning",buttons:[{height:35,text:"OK",click:function(){$(this).dialog("close")}}]}).dialog("open"),
!1;addQuoteFormDialog();jQuery("#addButtonDiv").dialog("close");return!0}}function cancelQuoteNavigator(){$("#addButtonForm").validationEngine("hideAll");jQuery("#addButtonDiv").dialog("close");return!0}
function addQuoteFormDialog(){var a=jQuery(document.createElement("div"));if("-1"===$("#quoteTypeDetail").val()||""===$("#jobQuoteSubmittedBYFullName").val())return jQuery(a).html('<span><b style="color:red;">Please provide "Type" and "Submitted By"</b></span>'),jQuery(a).dialog({modal:!0,width:300,height:150,title:"Warning",buttons:[{height:35,text:"OK",click:function(){$(this).dialog("close")}}]}).dialog("open"),!1;var a=$("#addButtonForm").serialize(),b=jQuery("#joQuoteheader").text();"edit"===
aAddandEdit&&(a=$("#addButtonForm").serialize());b="copy"===aGlobalVariable?$("#joHeaderID").val():saveQuoteDetailInfo(!0);$("#joQuoteHeaderID").val(" ");$("#joQuoteHeaderID").val(b);$("#addquotesList").trigger("reloadGrid");$("#addquotesList").jqGrid("setGridParam",{postData:{joQuoteHeaderID:b}});jQuery("#joQuoteheader").empty();jQuery("#joQuoteheader").text(b);var c=b;$("#joHeaderID").val(" ");$("#joHeaderID").val(c);var f="";0===Number(b)&&(f=$("#joHeaderID").val(),$("#addquotesList").trigger("reloadGrid"),
$("#addquotesList").jqGrid("setGridParam",{postData:{joQuoteHeaderID:f}}),jQuery("#joQuoteheader").text(f),c=f,$("#joHeaderID").val(c));b>c&&(c=b);$.ajax({url:"./jobtabs2/manpulaterProductQuotes",type:"POST",data:a+"&joQuoteHeaderID="+c+"&quoteheaderid="+b+"&oper="+aAddandEdit,success:function(a){$("#joQuoteheader").text(b);$("#addquotesList").jqGrid("GridUnload");loadQuotesListDetails();$("#addquotesList").jqGrid("setGridParam",{postData:{joQuoteHeaderID:b}});$("#addquotesList").trigger("reloadGrid");
"edit"===aGlobalConstant?(aDetailId=a+",",aListDetailId+=aDetailId,$("#joDetailID").val(aListDetailId)):$("#joDetailID").val("");0===Number(b)&&($("#addquotesList").jqGrid("GridUnload"),loadQuotesListDetails(),$("#addquotesList").jqGrid("setGridParam",{postData:{joQuoteHeaderID:f}}),$("#addquotesList").trigger("reloadGrid"))}});return!0}
function deleteQuote(a){$.ajax({url:"./jobtabs2/deleteQuickQuoteDetail",mType:"GET",data:{joHeaderQuoteDetailID:a},success:function(a){$("#addquotesList").trigger("reloadGrid");$.each(a,function(a,b){})}})};