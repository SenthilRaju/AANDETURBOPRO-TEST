var newDialogDiv=jQuery(document.createElement("div")),jobber=$(".jobHeader_JobNumber").val(),CustomName=$(".customerNameField").val(),jobLocation1=$("#locationAddressID1").val(),jobLocation2=$("#locationAddressID2").val(),jobCity=$("#locationCity").val(),jobState=$("#locationState").val(),jobZip=$("#locationZipID").val(),errorMessage=[],taxTerritory;$(".datepickerCustom").datetimepicker();$(".datepicker").datepicker();
var aSysAdmin=$("#userAdminID").val(),aUserAdmin=$("#userAdminID").val(),jobStatus=getUrlVars().jobStatus;
if("Booked"===jobStatus){$("#customerLabel").css("display","none");$("#customerFields").css("display","none");var customer='&nbsp;<b>Customer: </b><span style="color:red;" class="mandatory"> *</span>',customerFieldAdmin='<input id="jobHeader_JobCustomerName_id" name="jobHeader_JobCustomer_name" class="jobHeader_JobCustomer validate[required]" style="width: 300px;" type="text" value="" placeholder="Minimum 3 characters required to get Customer List">&nbsp; <img alt="search" src="./../resources/scripts/jquery-autocomplete/search.png" title="Must be atleast 2 characters long">',customerField=
'<input id="jobHeader_JobCustomerName_id" name="jobHeader_JobCustomer_name" class="jobHeader_JobCustomer validate[required]" style="width: 300px;" type="text" value="" placeholder="Minimum 3 characters required to get Customer List" disabled="disabled">&nbsp; <img alt="search" src="./../resources/scripts/jquery-autocomplete/search.png" title="Must be atleast 2 characters long">';$("#customerBookedLabel").empty();$("#customerBookedFields").empty();$("#customerBookedLabel").append(customer);"1"!==aSysAdmin?
$("#customerBookedFields").append(customerField):$("#customerBookedFields").append(customerFieldAdmin);$("#jobHeader_JobCustomerName_id").val($("#customerHiddenID").val());bookedType="bookedID";validateBookedJob()}
$(document).ready(function(){POAmountCalculation();"new"===getUrlVars().token&&$("#bidDate_Date").datepicker("setDate",new Date);"credit"===getUrlVars().selectTab&&$("#tabs_main_job").tabs("select",3);$(".jobHeader_ORI_JobNumber").val();$("#loadingMainDiv").css({visibility:"hidden"});$("#contractAmount").val(formatCurrency($("#contractAmountID").val()));$("#totalContractamount").val(formatCurrency($("#contractAmountID").val()));return!0});
function validateBookedJob(){$("#TaxTerritory").val();var b=$("#jobMain_TaxTerritory").val(),d=$("#jobMain_salesRepsList").val();$("#salesRepId").val();var a=$("#estomattedHiddenID").val(),e=$("#jobContractAmount").val();""===b&&errorMessage.push("'Tax Territory'");""===d&&errorMessage.push("'Salesman'");""!==a&&""!==e&&"0.0000"!==a&&"0.0000"!==e||errorMessage.push("'Contract Amount' and 'Estimated Cost' in Quote page");""===$(".customerNameField").val()?errorMessage.push("'Customer'"):""===$("#jobHeader_JobCustomerName_id").val()&&
errorMessage.push("'Customer'");b="Following fields are mandatory for a booked job: <br/><br/>";for(d=0;d<errorMessage.length;d++)b=b+(d+1)+". "+errorMessage[d]+"<br/>",""!==errorMessage&&(jQuery(newDialogDiv).html('<span style="color:#FF0066;">'+b+'</span><br><hr style="color: #cb842e;">'),jQuery(newDialogDiv).dialog({modal:!0,title:"Alert",width:420,buttons:[{height:30,text:"OK",click:function(){$(this).dialog("close")}}]}).dialog("open"),$("div.ui-dialog-buttonpane.ui-widget-content.ui-helper-clearfix").css("margin",
"-1.5em 0 0 0"),$("div.ui-dialog-buttonpane.ui-widget-content.ui-helper-clearfix").css("padding"," 0.3em 1em 0.1em .4em"));return!1}
function updateBookedQuote(b,d){validateBookedJob();var a=$("#joMaster_ID").text(),e=$("#jobNumber_ID").text(),c=new Date,h=c.getFullYear(),h=h.toString().slice(2),c=c.getMonth()+1;9>=c&&(c="0"+c);""!==b&&""===d&&$.ajax({url:"./job_controller/ORI_QuoteNumber",type:"POST",data:{joMasterID:a,jobNumber:e,aQuoteNumber:h+c},success:function(c){document.location.href="./jobflow?token=view&"+("jobNumber="+c.jobNumber+"&jobName="+c.description+"&jobStatus=Booked")}});return!0}
function openAddEngineer(){jQuery("#addEngineerDialog").dialog("open")}jQuery(function(){jQuery("#addEngineerDialog").dialog({autoOpen:!1,modal:!0,title:"Add New Engineer",height:400,width:785,buttons:{},close:function(){$("#addNewEngineerForm").validationEngine("hideAll");return!0}})});
function saveNewEngineer(){if(!$("#addNewEngineerForm").validationEngine("validate"))return!1;var b=$("#areaCode").val(),d=$("#exchangeCode").val(),a=$("#subscriberNumber").val(),e="";""!==b&&(e="("+b+") "+d+"-"+a);var d=$("#areaCode1").val(),a=$("#exchangeCode1").val(),c=$("#subscriberNumber1").val(),b="";""!==d&&(b="("+d+") "+a+"-"+c);var a=$("#areaCode2").val(),c=$("#exchangeCode2").val(),h=$("#subscriberNumber2").val(),d="";""!==a&&(d="("+a+") "+c+"-"+h);a=$("#addNewEngineerForm").serialize();
$.ajax({type:"POST",url:"./jobtabs1/addNewEngineer",data:a+"&USPhoneNumber="+e+"&USPhone_Number="+b+"&fax="+d,success:function(c){c=c.rxMasterId;$("#engineersRXId").val(c)}});$("#addNewEngineerForm").validationEngine("hideAll");jQuery("#addEngineerDialog").dialog("close");return $("#jobMain_engineersRXList").val($("#companyName1").val())}function openAddArchitect(){jQuery("#addArchitectDialog").dialog("open")}
jQuery(function(){jQuery("#addArchitectDialog").dialog({autoOpen:!1,modal:!0,title:"Add New Architect",height:400,width:785,buttons:{},close:function(){$("#addNewArchitectForm").validationEngine("hideAll");return!0}})});
function saveNewArchitect(){if(!$("#addNewArchitectForm").validationEngine("validate"))return!1;var b=$("#area_Code").val(),d=$("#exchange_Code").val(),a=$("#subscriber_Number").val(),e="";""!==b&&(e="("+b+") "+d+"-"+a);var d=$("#area_Code1").val(),a=$("#exchange_Code1").val(),c=$("#subscriber_Number1").val(),b="";""!==d&&(b="("+d+") "+a+"-"+c);var a=$("#area_Code2").val(),c=$("#exchange_Code2").val(),h=$("#subscriber_Number2").val(),d="";""!==a&&(d="("+a+") "+c+"-"+h);a=$("#addNewArchitectForm").serialize();
$.ajax({type:"POST",url:"./jobtabs1/addNewArchitect",data:a+"&USPhoneNumber="+e+"&USPhone_Number="+b+"&fax="+d,success:function(c){c=c.rxMasterId;$("#architectId").val(c)}});$("#addNewArchitectForm").validationEngine("hideAll");jQuery("#addArchitectDialog").dialog("close");return $("#jobMain_architectsList").val($("#companyName2").val())}function openAddContractor(){jQuery("#addContractorDialog").dialog("open")}
jQuery(function(){jQuery("#addContractorDialog").dialog({autoOpen:!1,modal:!0,title:"Add New General Contractor",height:400,width:785,buttons:{},close:function(){$("#addNewContractorForm").validationEngine("hideAll");return!0}})});
function saveNewContractor(){if(!$("#addNewContractorForm").validationEngine("validate"))return!1;var b=$("#gcareaCode").val(),d=$("#gcexchangeCode").val(),a=$("#gcsubscriberNumber").val(),e="";""!==b&&(e="("+b+") "+d+"-"+a);var d=$("#gcareaCode1").val(),a=$("#gcexchangeCode1").val(),c=$("#gcsubscriberNumber1").val(),b="";""!==d&&(b="("+d+") "+a+"-"+c);var a=$("#gcareaCode2").val(),c=$("#gcexchangeCode2").val(),h=$("#gcsubscriberNumber2").val(),d="";""!==a&&(d="("+a+") "+c+"-"+h);a=$("#addNewContractorForm").serialize();
$.ajax({type:"POST",url:"./jobtabs1/addNewContractor",data:a+"&USPhoneNumber="+e+"&USPhone_Number="+b+"&fax="+d,success:function(c){c=c.rxMasterId;$("#GCId").val(c)}});$("#addNewContrcatorForm").validationEngine("hideAll");jQuery("#addContractorDialog").dialog("close");return $("#jobMain_GCList").val($("#companyName3").val())}
function jobMainForm_save(){if(!$("#jobHeaderFormId").validationEngine("validate")||!$("#jobWizardMainForm").validationEngine("validate"))return!1;if("-1"===$("#jobMain_Divisions").val())return jQuery(newDialogDiv).html('<span><b style="color: red;">Please select Division</b></span>'),jQuery(newDialogDiv).dialog({modal:!0,width:200,height:150,title:"Warning",buttons:[{height:35,text:"OK",click:function(){$(this).dialog("close")}}]}).dialog("open"),!1;var b=$("#jobWizardMainForm").serialize(),d=$("#jobHeaderFormId").serialize(),
a=$(".jobHeader_JobName").val(),a="`"+$(".jobHeader_JobName").val()+"`",a=a.replace(/&/,"`"),e=$(".jobHeader_JobCustomer").val(),c=$(".jobHeader_JobNumber").val(),h=$("#JobCustomerId").val(),g=$("#joMasterHiddenID").val();""===$("#jobMain_salesRepsList").val()&&$("#salesRepId").val("");""===$("#jobMain_CSRList").val()&&$("#CSRId").val("");""===$("#jobMain_SalesMgrList").val()&&$("#salesMgrId").val("");""===$("#jobMain_EngineersList").val()&&$("#cus_engineerId").val("");""===$("#jobMain_PrjMgrList").val()&&
$("#prjMgrId").val("");""===$("#jobMain_TakeOffList").val()&&$("#takeOffId").val("");""===$("#jobMain_QuoteByList").val()&&$("#quoteId").val("");""===$("#jobMain_architectsList").val()&&$("#architectId").val("");""===$("#jobMain_engineersRXList").val()&&$("#engineersRXId").val("");""===$("#jobMain_GCList").val()&&$("#GCId").val("");""===$("#jobMain_TaxTerritory").val()&&$("#TaxTerritory").val("");var f=$("#jobMain_salesRepsList").val(),k=$("#jobMain_CSRList").val(),l=$("#jobMain_SalesMgrList").val(),
m=$("#jobMain_EngineersList").val(),n=$("#jobMain_PrjMgrList").val(),p=$("#jobMain_TakeOffList").val(),q=$("#jobMain_QuoteByList").val(),r=$("#jobMain_architectsList").val(),s=$("#jobMain_engineersRXList").val(),t=$("#jobMain_GCList").val(),u=$("#jobMain_TaxTerritory").val();""===g?$.ajax({type:"POST",url:"./jobtabs1/createjob",data:"jobCustomer="+e+"&jobDescription="+a+"&jobCustomerID="+h+"&"+b+"&"+d,success:function(c){document.location.href="./jobflow?token=view&"+("jobNumber="+c.jobNumber+"&jobName="+
c.description+"&jobStatus=Bid")}}):$.ajax({url:"./job_controller/updatejob",type:"POST",data:"joMasterId="+g+"&jobDescription="+a+"&jobCustomer="+e+"&jobCusromerId="+h+"&salesRep="+f+"&csrList="+k+"&salesMgrList="+l+"&enggList="+m+"&prjMgerList="+n+"&takeoffList="+p+"&quoteByList="+q+"&architectList="+r+"&enggRXList="+s+"&GcList="+t+"&taxtreeitoty="+u+"&"+b+"&"+d,success:function(b){b=b.jobStatus;var e="";0==b?e="Bid":-4==b?e="Planning":6==b?e="Budget":1==b?e="Quote":5==b?e="Submitted":3==b?e="Booked":
4==b?e="Closed":2==b?e="Lost":-1==b?e="Abandoned":-2==b?e="Rejected":-3==b&&(e="Over Budget");document.location.href="./jobflow?token=view&"+("jobNumber="+c+"&jobName="+a+"&jobStatus="+e)}});$(".requiredSave").show();return!0}
function successDialog(){jQuery(newDialogDiv).attr("id","msgDlg");jQuery(newDialogDiv).html('<span><b style="color: #45BF07;">Job successfully created</b></span>');jQuery(newDialogDiv).dialog({modal:!0,width:300,height:150,title:"Alert.",open:function(b,d){setTimeout("$('#msgDlg').dialog('close')",1E3)}});return!0}
$(function(){var b={},d="";$("#jobMain_salesRepsList").autocomplete({minLength:1,timeout:1E3,select:function(b,e){var c=e.item.id;$("#salesRepId").val(c)},source:function(a,e){var c=a.term;c in b?e(b[c]):d=$.getJSON("salescontroller/salesrep",a,function(a,g,f){b[c]=a;f===d&&e(a)})},error:function(a){$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")}})});
$(function(){var b={},d="";$("#jobMain_CSRList").autocomplete({minLength:1,timeout:1E3,select:function(a,b){var c=b.item.id;$("#CSRId").val(c)},source:function(a,e){var c=a.term;c in b?e(b[c]):d=$.getJSON("employeeCrud/CSRList",a,function(a,g,f){b[c]=a;f===d&&e(a)})},error:function(a){$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")}})});
$(function(){var b={},d="";$("#jobMain_SalesMgrList").autocomplete({minLength:1,timeout:1E3,select:function(a,b){var c=b.item.id;$("#salesMgrId").val(c)},source:function(a,e){var c=a.term;c in b?e(b[c]):d=$.getJSON("employeeCrud/salesMGR",a,function(a,g,f){b[c]=a;f===d&&e(a)})},error:function(a){$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")}})});
$(function(){var b={},d="";$("#jobMain_EngineersList").autocomplete({minLength:1,timeout:1E3,select:function(a,b){var c=b.item.id;$("#engineerId").val(c)},source:function(a,e){var c=a.term;c in b?e(b[c]):d=$.getJSON("employeeCrud/engineer",a,function(a,g,f){b[c]=a;f===d&&e(a)})},error:function(a){$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")}})});
$(function(){var b={},d="";$("#jobHeader_JobCustomerName_id").autocomplete({minLength:2,timeout:1E3,select:function(a,b){var c=b.item.id;$("#JobCustomerId").val(c)},source:function(a,e){var c=a.term;c in b?e(b[c]):d=$.getJSON("customerList/customerNameList",a,function(a,g,f){b[c]=a;f===d&&e(a)})},error:function(a){$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")}})});
$(function(){var b={},d="";$("#jobMain_PrjMgrList").autocomplete({minLength:1,timeout:1E3,select:function(a,b){var c=b.item.id;$("#prjMgrId").val(c)},source:function(a,e){var c=a.term;c in b?e(b[c]):d=$.getJSON("employeeCrud/projectManager",a,function(a,g,f){b[c]=a;f===d&&e(a)})},error:function(a){$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")}})});
$(function(){var b={},d="";$("#jobMain_TakeOffList").autocomplete({minLength:1,timeout:1E3,select:function(a,b){var c=b.item.id;$("#takeOffId").val(c)},source:function(a,e){var c=a.term;c in b?e(b[c]):d=$.getJSON("employeeCrud/quotes",a,function(a,g,f){b[c]=a;f===d&&e(a)})},error:function(a){$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")}})});
$(function(){var b={},d="";$("#jobMain_QuoteByList").autocomplete({minLength:1,timeout:1E3,select:function(a,b){var c=b.item.id;$("#quoteId").val(c)},source:function(a,e){var c=a.term;c in b?e(b[c]):d=$.getJSON("employeeCrud/quotes",a,function(a,g,f){b[c]=a;f===d&&e(a)})},error:function(a){$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")}})});
$(function(){var b={},d="";$("#jobMain_engineersRXList").autocomplete({minLength:2,timeout:1E3,clearcache:!0,open:function(){$(".ui-autocomplete").prepend('<div style="font-size: 15px;"><b><a href="javascript:openAddEngineer()" style="color:#CB842E;font-family: Verdana,Arial,sans-serif;font-size: 0.8em;">+ Add New</a></b></div>');$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")},select:function(a,b){var c=b.item.id;$("#engineersRXId").val(c)},source:function(a,e){var c=a.term;
c in b?e(b[c]):d=$.getJSON("companycontroller/engineerRxList",a,function(a,g,f){b[c]=a;f===d&&e(a)})},error:function(a){$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")}})});
$(function(){var b={},d="";$("#jobMain_architectsList").autocomplete({minLength:2,timeout:1E3,open:function(){$(".ui-autocomplete").prepend('<div style="font-size: 15px;"><b><a href="javascript:openAddArchitect()" style="color:#CB842E;font-family: Verdana,Arial,sans-serif;font-size: 0.8em;">+ Add New</a></b></div>');$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")},select:function(a,b){var c=b.item.id;$("#architectId").val(c)},source:function(a,e){var c=a.term;c in b?e(b[c]):d=
$.getJSON("companycontroller/architectRxList",a,function(a,g,f){b[c]=a;f===d&&e(a)})},error:function(a){$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")}})});
$(function(){var b={},d="";$("#jobMain_GCList").autocomplete({minLength:2,timeout:1E3,open:function(){$(".ui-autocomplete").prepend('<div style="font-size: 15px;"><b><a href="javascript:openAddContractor()" style="color:#CB842E;font-family: Verdana,Arial,sans-serif;font-size: 0.8em;">+ Add New</a></b></div>');$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")},select:function(a,b){var c=b.item.id;$("#GCId").val(c)},source:function(a,e){var c=a.term;c in b?e(b[c]):d=$.getJSON("companycontroller/GCRXList",
a,function(a,g,f){b[c]=a;f===d&&e(a)})},error:function(a){$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")}})});
$(function(){var b={},d="";$("#jobMain_TaxTerritory").autocomplete({minLength:2,timeout:1E3,select:function(a,b){var c=b.item.id;$("#TaxTerritory").val(c);c=b.item.taxValue;$("#TaxValue").val(c);$("#TaxValue").empty();$("#TaxValue").append(c+"%")},source:function(a,e){var c=a.term;c in b?e(b[c]):d=$.getJSON("companycontroller/companyTax",a,function(a,g,f){b[c]=a;f===d&&e(a)})},error:function(a){$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")}})});
$(function(){var b={},d="";$("#locationCityID").autocomplete({minLength:2,timeout:1E3,select:function(a,b){var c=b.item.label.split(" (")[1].replace(")","");$("#locationStateID").val(c)},source:function(a,e){var c=a.term;c in b?e(b[c]):d=$.getJSON("job_controller/cityAndState",a,function(a,g,f){b[c]=a;f===d&&e(a)})},error:function(a){$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")}})});
$(function(){var b={},d="";$("#locationCity").autocomplete({minLength:2,timeout:1E3,select:function(a,b){var c=b.item.label.split(" (")[1].replace(")","");$("#locationState").val(c)},source:function(a,e){var c=a.term;c in b?e(b[c]):d=$.getJSON("job_controller/cityAndState",a,function(a,g,f){b[c]=a;f===d&&e(a)})},error:function(a){$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")}})});
$(function(){var b={},d="";$("#city").autocomplete({minLength:2,timeout:1E3,select:function(a,b){var c=b.item.label.split(" (")[1].replace(")","");$("#state").val(c)},source:function(a,e){var c=a.term;c in b?e(b[c]):d=$.getJSON("job_controller/cityAndState",a,function(a,g,f){b[c]=a;f===d&&e(a)})},error:function(a){$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")}})});
$(function(){var b={},d="";$("#contractorCity").autocomplete({minLength:2,timeout:1E3,select:function(a,b){var c=b.item.label.split(" (")[1].replace(")","");$("#contractorState").val(c)},source:function(a,e){var c=a.term;c in b?e(b[c]):d=$.getJSON("job_controller/cityAndState",a,function(a,g,f){b[c]=a;f===d&&e(a)})},error:function(a){$(".ui-autocomplete-loading").removeClass("ui-autocomplete-loading")}})});
function deleteJob(){jQuery(newDialogDiv).html('<span><b style="color: red;">Delete this Job Record?</b></span>');jQuery(newDialogDiv).dialog({modal:!0,width:300,height:120,title:"Confirm Delete",buttons:{Submit:function(){jQuery(this).dialog("close");$("#loadingMainDiv").css({visibility:"visible"});var b=$("#joMasterHiddenID").val(),d=$("#jobNumberHiddenID").val();$.ajax({url:"./job_controller/deletejob",type:"POST",data:{joMasterID:b,jobNumber:d},success:function(a){$("#loadingMainDiv").css({visibility:"hidden"});
jQuery(newDialogDiv).attr("id","msgDlg");jQuery(newDialogDiv).html('<span><b style="color:green;">Job is Deleted Sucessfully.</b></span>');jQuery(newDialogDiv).dialog({modal:!0,width:300,height:150,title:"Message",buttons:[{height:35,text:"OK",click:function(){$(this).dialog("close");document.location.href="./home"}}]}).dialog("open");return!0}})},Cancel:function(){jQuery(this).dialog("close")}}}).dialog("open")}
function salesmanAdminValidation(b){if("Booked"===jobStatus)if("1"!==aUserAdmin)jQuery(newDialogDiv).html('<span style="color:#FF0066;">You are not authorized to modify this field.  Admin only can change.</span>'),jQuery(newDialogDiv).dialog({modal:!0,title:"Booked Job Alert",width:400,buttons:[{height:30,text:"OK",click:function(){$(this).dialog("close");$("#jobMain_salesRepsList").val($("#jobMain_salesRepsListHidden").val());document.getElementById("jobMain_salesRepsList").disabled=!0}}]}).dialog("open");
else return b}
function jobSiteAdminValidation(b){if("Booked"===jobStatus)if("1"!==aUserAdmin)jQuery(newDialogDiv).html('<span style="color:#FF0066;">You are not authorized to modify this field.  Admin only can change.</span>'),jQuery(newDialogDiv).dialog({modal:!0,title:"Booked Job Alert",width:400,buttons:[{height:30,text:"OK",click:function(){$(this).dialog("close");$("#jobMain_TaxTerritory").val($("#jobMain_TaxTerritoryHidden").val());document.getElementById("jobMain_TaxTerritory").disabled=!0}}]}).dialog("open");else return b}
function addcustomerpo(){jQuery("#openCustomerPODia").dialog("open");return!0}jQuery(function(){jQuery("#openCustomerPODia").dialog({autoOpen:!1,width:475,title:"Customer PO",modal:!0,buttons:{},close:function(){$("#openCustomerPOForm").validationEngine("hideAll");return!0}})});
function POAmountCalculation(){if(!$("#openCustomerPOForm").validationEngine("validate"))return!1;var b=$("#totalContractamount").val().replace(/[^0-9\.]+/g,""),d=$("#po_amount2").val().replace(/[^0-9\.]+/g,""),a=$("#po_amount3").val().replace(/[^0-9\.]+/g,""),e=$("#po_amount4").val().replace(/[^0-9\.]+/g,""),c=$("#po_amount5").val().replace(/[^0-9\.]+/g,""),h=$("#po_amount6").val().replace(/[^0-9\.]+/g,""),b=Number(b)-(Number(d)+Number(a)+Number(e)+Number(c)+Number(h));$("#po_amount2").val(formatCurrency(d));
$("#po_amount3").val(formatCurrency(a));$("#po_amount4").val(formatCurrency(e));$("#po_amount5").val(formatCurrency(c));$("#po_amount6").val(formatCurrency(h));$("#contractAmount").val(formatCurrency(b));return!0}
function removeDollarSymbl(){var b=$("#po_amount2").val().replace(/[^0-9\.]+/g,"").replace(".00",""),d=$("#po_amount3").val().replace(/[^0-9\.]+/g,"").replace(".00",""),a=$("#po_amount4").val().replace(/[^0-9\.]+/g,"").replace(".00",""),e=$("#po_amount5").val().replace(/[^0-9\.]+/g,"").replace(".00",""),c=$("#po_amount6").val().replace(/[^0-9\.]+/g,"").replace(".00","");$("#po_amount2").val(b);$("#po_amount3").val(d);$("#po_amount4").val(a);$("#po_amount5").val(e);$("#po_amount6").val(c);return!0}
function saveMainCustomerPONumber(){var b={covered_material1:$("#covered_material1").val(),po_number1:$("#po_number1").val(),contractAmount:$("#contractAmount").val().replace(/[^0-9\.]+/g,"")},d={covered_material2:$("#covered_material2").val(),po_number2:$("#po_number2").val(),po_amount2:$("#po_amount2").val().replace(/[^0-9\.]+/g,"")},a={covered_material3:$("#covered_material3").val(),po_number3:$("#po_number3").val(),po_amount3:$("#po_amount3").val().replace(/[^0-9\.]+/g,"")},e={covered_material4:$("#covered_material4").val(),
po_number4:$("#po_number4").val(),po_amount4:$("#po_amount4").val().replace(/[^0-9\.]+/g,"")},c={covered_material5:$("#covered_material5").val(),po_number5:$("#po_number5").val(),po_amount5:$("#po_amount5").val().replace(/[^0-9\.]+/g,"")},h={covered_material6:$("#covered_material6").val(),po_number6:$("#po_number6").val(),po_amount6:$("#po_amount6").val().replace(/[^0-9\.]+/g,"")},b={aRequestObj1:b,aRequestObj2:d,aRequestObj3:a,aRequestObj4:e,aRequestObj5:c,aRequestObj6:h,joMasterID:$("#joMaster_ID").text()};
$.ajax({url:"./jobtabs1/saveCustomerPODetails",type:"POST",data:{aCustomerPOReqObj:JSON.stringify(b)},success:function(a){if("add"===a.oper)return jQuery(newDialogDiv).html('<span><b style="color:Green;">Change Order Details Added.</b></span>'),jQuery(newDialogDiv).dialog({modal:!0,width:300,height:150,title:"Success.",buttons:[{height:35,text:"OK",click:function(){$(this).dialog("close");$("#openCustomerPODia").dialog("close");var a=$("#po_number1").val();$("#jobmain_ponumber").val(a);location.reload()}}]}).dialog("open"),
!0;if("edit"===a.oper)return jQuery(newDialogDiv).html('<span><b style="color:Green;">Change Order Details Updated.</b></span>'),jQuery(newDialogDiv).dialog({modal:!0,width:300,height:150,title:"Success.",buttons:[{height:35,text:"OK",click:function(){$(this).dialog("close");$("#openCustomerPODia").dialog("close");var a=$("#po_number1").val();$("#jobmain_ponumber").val(a);location.reload()}}]}).dialog("open"),!0}})}
function cancelMainCustomerPONumber(){jQuery("#openCustomerPODia").dialog("close");var b=$("#po_number1").val();$("#jobmain_ponumber").val(b);return!0};