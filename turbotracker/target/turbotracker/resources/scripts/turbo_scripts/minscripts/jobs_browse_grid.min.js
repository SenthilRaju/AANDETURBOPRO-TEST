jQuery(document).ready(function(){$("#jobsGrid").jqGrid({url:"./job_controller",datatype:"JSON",mtype:"POST",pager:jQuery("#jobsGridPager"),colNames:"Job #;Project;City;Rep;Status;Customer;Cust PO #;Rep. #".split(";"),colModel:[{name:"jobNumber",index:"jobNumber",align:"left",width:50,editable:!0,hidden:!1,edittype:"text",editoptions:{size:30,readonly:!0},editrules:{edithidden:!1,required:!1}},{name:"description",index:"description",align:"left",width:150,hidden:!1,editable:!0,cellattr:function(){return'style="white-space: normal" '},
editoptions:{size:20,readonly:!1,alignText:"right"},editrules:{edithidden:!0,required:!0}},{name:"locationCity",index:"locationCity",align:"",width:90,hidden:!1,editable:!0,editoptions:{size:20,readonly:!1,alignText:"right"},editrules:{edithidden:!0,required:!0}},{name:"initials",index:"initials",align:"center",width:30,hidden:!1,editable:!0,editoptions:{size:20,readonly:!1,alignText:"right"},editrules:{edithidden:!0,required:!0}},{name:"jobStatus",index:"jobStatus",align:"center",width:60,hidden:!1,
editable:!0,editoptions:{size:20,readonly:!1,alignText:"right"},editrules:{edithidden:!0,required:!0}},{name:"customerName",index:"customerName",align:"",width:150,hidden:!1,editable:!0,cellattr:function(){return'style="white-space: normal" '},editoptions:{size:20,readonly:!1,alignText:"right"},editrules:{edithidden:!0,required:!0}},{name:"customerPONumber",index:"customerPONumber",align:"center",width:90,hidden:!1,editable:!0,edittype:"textarea",editoptions:{},editrules:{edithidden:!0,required:!1}},
{name:"code",index:"code",align:"center",width:40,hidden:!1,editable:!0,editoptions:{size:20,readonly:!1,alignText:"right"},editrules:{edithidden:!0,required:!0}}],rowNum:50,pgbuttons:!0,recordtext:"",rowList:[50,100,200,500,1E3],viewrecords:!0,pager:"#jobsGridPager",sortname:"employeeId",sortorder:"asc",imgpath:"themes/basic/images",caption:"Jobs",height:547,width:1140,rownumbers:!0,altRows:!0,altclass:"myAltRowClass",rownumWidth:45,loadComplete:function(){},loadError:function(){},ondblClickRow:function(a){var b=
jQuery(this).getRowData(a),a=b.jobNumber,c=""+b.description,b=b.customerName,c=c.replace(/&/g,"``"),c=c.replace(/#/,"__"),a="jobNumber="+a+"&jobName="+c+"&jobCustomer="+b;document.location.href="./jobflow?token=view&"+a},jsonReader:{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata"}}).navGrid("#jobsGridPager",{add:!1,edit:!1,del:!1,refresh:!1,search:!1})});
function getCellValue(a){var b=a.indexOf(" value=",0),c=a.indexOf(" name=",b),f="";0<b&&(f=a.substr(b+7,c-b-6));return f}function addNewJob(){document.location.href="./jobflow?token=new"}
$(function(){var a={},b;$("#searchJob").autocomplete({minLength:3,select:function(a,b){var d=b.item.value.replace("[","_").split("_"),e=d[0],e=e.replace(/&/g,"``"),e=e.replace(/#/,"__"),g=d[1].replace("]"," ");$.ajax({url:"./search/searchjobcustomer",mType:"GET",data:{jobnumber:g,jobname:e},success:function(a){$.each(a,function(a,b){status=b.jobStatus;jobCustomer=b.customerName});null===jobCustomer&&(jobCustomer="");window.location.href="./jobflow?token=view&jobNumber="+g+"&jobName="+e+"&jobCustomer="+
jobCustomer+"&jobStatus="+status+""},error:function(){}})},source:function(c,f){var d=c.term;d in a?f(a[d]):b=$.getJSON("search/searchjoblist",c,function(c,g,h){a[d]=c;h===b&&f(c)})}})});